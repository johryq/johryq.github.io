<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=53605&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hw Hcia | 2332334</title>
<meta name=keywords content><meta name=description content="Hw Hcia - 2332334"><meta name=author content="2332334"><link rel=canonical href=//localhost:53605/posts/system/hw-hcia/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=//localhost:53605/favicon.ico><link rel=icon type=image/png sizes=16x16 href=//localhost:53605/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=//localhost:53605/favicon-32x32.png><link rel=apple-touch-icon href=//localhost:53605/apple-touch-icon.png><link rel=mask-icon href=//localhost:53605/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:53605/posts/system/hw-hcia/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hw Hcia"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="//localhost:53605/posts/system/hw-hcia/"><meta property="og:image" content="//localhost:53605/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-08T19:58:55+08:00"><meta property="article:modified_time" content="2024-12-03T16:59:04+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="//localhost:53605/images/papermod-cover.png"><meta name=twitter:title content="Hw Hcia"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"//localhost:53605/posts/"},{"@type":"ListItem","position":2,"name":"Hw Hcia","item":"//localhost:53605/posts/system/hw-hcia/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hw Hcia","name":"Hw Hcia","description":"","keywords":[],"articleBody":"HCIA DataCom(华为数通) 网络基础 网络类型 局域网(LAN)–local area network 城域网(MAN)–metropolitan 广域网(WAN)–wide 网络拓扑 网络种物理逻辑架构\n形态\n星型 总线型 环型 树型 全网状 部分网状 参考模型 OSI(ISO) 应用层 表示层 会话层 传输层 网络层 数据链路层 物理层 TCP/IP标准模型 应用层 主机到主机层 英特网层 网络接入层 TCP\u0026IP对等模型 应用层 HTTP | FTP | DNS | Telnet | DHCP | SNMP | SMTP 传输层 TCP | UDP | 2的16次方-1 65535端口 网络层 IPV4 | IPV6 | ICMP(ping) | IGMP | IP 数据链路层 PPPoE | MAC | Ethernet | PPP 物理层 传输层 TCP如何保证数据准确 三次握手 seq ack\n窗口滑动机制 win\nTCP关闭 四次挥手 fin\n网络层 路由 mac\nARP(address resolution protocol)协议\n根据IP地址获取MAC地址 广播请求\nHost1 查看ARP缓存 无,ARP request Host2 缓存APR ARP reply Host1 缓存ARP 华为VRP(Versatile Routing Plaform) 华为数通产品通用操作系统平台\n文件系统 系统文件 cc 配置文件 cfg,zip,dat 补丁文件 pat PAF文件 bin 视图 用户界面:\nconsole vty(使用前需要配置)\n用户视图 return 系统视图 - system-view 接口视图 - interface GigbitEthenet 0/0/1 协议视图 - Huawei-ospf-1 命令 undo 恢复缺省 禁用功能 删除配置 基本配置 命令 参数 user privilege 配置指定用户界面级别 command-privilege level 设置指定视图命令级别 set authentication cipher password 配置本地认证密码 idle-timeout 超时连接时间 sysname 设备名 clock timezone 设置本地市区 clock datetime 设置当前时间日期 clock daylight-saving-time 设置夏令时 系统信息 display device ? 设备信息 display esn 21980106042SL4600115 设备唯一编号 display version 版本信息 display power 电源异常时,查看相关信息 display power system 功率信息 display voltage { all slotslot-id} display fan ? 风扇 display cpu-usage CPU display cpu-usage configuration ? 查看CPU占用率的配置信息 display memory-usage ? 内存 目录操作 命令 参数 pwd 当前所在目录 dir ls more 查看文本内容 cd 切换 mkdir 新建目录 rmdir 删除目录 copy 复制 move 移动 rename 重名 delete/unreserved 删除/永久删除文件 undelete 恢复删除文件 reset recycle-bin 彻底删除回收站中文件 配置文件 用户视图\n命令 参数 display current-configuration 显示当前配置文件 display saved-configuration 显示保存的配置文件 save 保存配置 display startup 查看当前启动配置文件 starup saved-configuration 配置系统下次启动时使用的配置文件 compare configuration 比较当前配置与下次启动配置文件 reset saved-configuration 清除下次启动时加载的配置文件 display configuration candlidate 当前未提交命令行信息(vrp5没有,v8的) 存储设备 命令 参数 fdisk 网络层协议与IP编址 ICMP IPX IP\n作用\n为网络层设备提供逻辑地址 数据包寻址与转发 协议头 TTL(time to live) 0-255 8bit\n防止环路\nProtocol(协议号) 6/TCP 17/UDP 11/ICMP\nIPV4 32bit A类地址 0.0.0.0 127.255.255.255.255\nB类 128.0.0.0 191.255.255.255\nC类 192.0.0.0 223.255.255.255\nD类 224.0.0.0 239.255.255.255\nE类 240.0.0.0 255.255.255.255\n私网IP\nA: 10.0.0.0 10.255.255.255\nB: 172.16.0.0 172.31.255.255\nC: 192.168.0.0 192.168.255.255\nIPV6 128bit\n子网划分(打脑壳) ICMP internet control message protocol\nIMCP重定向: 优化路由路径,实现更优路径 差错检测: ping 错误报告: tracert\n以太网交换基础 局域网中通用,常见协议\n以太网是建立在CSMA/CD(carrier sense multiple access/collision detection 载波监听多路访问/冲突检测)机制上的广播型网络\n早期无交换机分割局域网,抢占式的,出现冲突域,CMSA/CD缓解冲突\n交换机隔离冲突域 不能隔离广播域\n以太网二层接口类型\n1.Access: 一般链接主机与交换机\n2.Trunk: 一般连接交换机与交换机\n3.Hybrid: 可看作前面两个接口结合\n以太网帧格式(数据帧) Ethernet_Ⅱ IEEE 802.3 mac地址 48bit ex:00-1E-10-DD-DD-02 001E-10DD-DD02\nOUI(organizationally unique ldentifier) 厂商代码 24bit 制造商分配 24bit 按目的mac地址区分:单播地址 广播地址 组播地址 以太网帧: 单播帧 广播帧 组播帧\n未知单播帧\n交换机转发行为\n泛洪 转发 丢弃 | arp -a | ARP缓存表 | | display mac-address verbose | mac地址表 |\n配置 system-view interface GigabitEthernet 0/0/1 undo negotiation auto speed 1000 #接口速率 duplex full #全双工 # 验证 sidplay interface GibabitEehernet 0/0/1 VLAN原理与配置 VLAN(virtual local area network) 虚拟局域网 划分广播域\nVlan Tag\nVlan帧\n802.1Qtag\nVLAN划分方式\n接口 mac ip子网 协议 策略 PVID,默认1,每个端口只有一个(1-4094)\n接口类型 Access(主机与交换机,只能处理一个标签) Trunk(交换机,处理多个标签) Hybrid(前两个结合) tagged 和 untagged 控制出口 设置PVID VLAN配置 基础配置\nundo portswitch # 二层接口切换为三层\n#系统视图 #创建VLAN vlan vlan-id #批量创建 vlan batch {vlan-id1 [to vlan-id2]} # batch -- VLAN ID # vlan-id1 -- 起始VLAN编号 # vlan-id2 -- 末尾VLAN编号 # 查看VLAN display vlan --- # Access # 接口视图 # 配置接口类型 port link-type access # 配置Access接口缺省VLAN prot default vlan vlan-id --- \\ # Trunk # 接口视图 port link-type trunk # Trunk端口指定VLAN prot trunk allow-pass vlan {{vlan-id[to vlan-id2]}} | all # Trunk口缺省VLAN port trunk pvid vlan vlan-id --- # Hybrid # 配置接口类型 prot link-type hybrid # Hybrid指定VLan 不能同时包含在两个列表中 prot hybrid untagged vlan {vlan-id1 [to vlan-id2]} | all prot hybrid tagged vlan {vlan-id1 [to vlan-id2]} | all # Hybrid口缺省VLAN prot hybrid pvid vlan vlan-id MAC 绑定 VLAN # VLAN视图 mac-vlan mac-address mac-address {mac-address-mask|mac-address-mask-length} # mac地址| mac地址掩码 | mac地址长度1-48 #使能MAC地址与VLAN # 接口视图 mac-vlan enable display mac-vlan mac-address all dis mac-vlan vlanID VLAN通信 三层交换机实现\n物理接口 交换机配置access口,并划分vlan 路由器配置ip地址,与交换机连接线缆,实现三层通信 子接口 vlanif # 子接口配置 interface GigabitEthernet0/0/0.10 dot1q termination vid 10 ip address ipaddress arp broadcast enable # 最后开启arp广播 vlanif\n存在数据链路层\nSTP(spanning tree protocol)生成树协议 通过阻塞端口消除环路,实现链路备份 RSTP（Rapid Spanning Tree Protocol,快速生成树协议）协议基于STP协议,实现网络拓扑快速收敛 MSTP(默认)\nIEEE 802.1D\n二层环路典型问题\n广播风暴 mac地址漂移 操作步骤\n选举一个根桥,会出现抢占,谁优先级高谁为根 非根交换机选举一个根端口 网段选举一个指定端口 阻塞非根,非指定端口 基本概念 根桥(桥ID) BID由16位的桥优先级(bridge priority)与桥MAC地址构成(唯一)\n16bit bp 48bit mac\nBID最小被选举为根桥\n先比较端口优先级 之后比较MAC地址 开销(Cost) 用于计算根路径开销,即到达根的开销\n带宽大,cost小,可配置\nRPC(root path cost,根路径开销) 接口到根的RPC = 路途所有入方向cost累加\n端口ID(PID,port ID) 由 高4bit接口优先级 + 低12bit接口编号 组成 默认128\nBPDU(bridge protocol data unit,网桥协议数据单元) STP协议报文,用于STP网络拓扑计算\n配置BPDU(configuration BPDU) TCN BPDU(topology change notification BPDU) 网络拓扑改变时发送 基础配置 # 配置工作模式 stp mode {stp | rstp | mstp} # 配置根桥 stp root primary # 备份根桥(优先级4096) stp root secondary --- # 优先级(默认32768) stp priority priority # 接口开销类型(默认IEEE 802.1t即dit1t) stp pathcost-standard { dot1d-1998 | dot1t | legacy } # 配置开销值 stp cost cost --- # 接口优先级(缺省为128) stp priority priority # 启用STP/RSTP/MSTP stp enable --- # 批量配置边缘端口 interface range GigabitEthernet 0/0/10 to GigabitEthernet 0/0/20 group-number GigabitEthernet 0/0/10 to GigabitEthernet 0/0/20 # 配置边缘端口 stp edged-port enable RSTP IEEE 802.1w\n新增端口类型\n备份端口 边缘端口 接口类型减少至三个\nforwarding learning discarding VBST: 基于VLAN的STP MSTP: 多生成树\n以太网链路聚合与交换机堆叠,集群 网络冗余备份,链路聚合,避免单点故障\n具体实现\n单板 设备 链路聚合 提升链路带宽\nEth-Trunk(以太网链路聚合)\n相关概念\n聚合组(Link Aggregation Group,LAG) 成员接口与成员链路 活动接口 | 活动链路 非活动接口 | 非活动链路 聚合模式:手工模式,LACP 活动接口上,下限 链路聚合控制协议数据单元(link aggregation control protocol data unit,LACPDU)\n默认系统优先级 32768\n配置命令 interface eth-trunk trunk-id mode {lacp / manual load-balance} # 须保持两端链路聚合模式相同,lacp 或者 手工 eth-trunk trunk-id # 接口视图加入trunkID trunkport interface-type {interface-number} # eth-trunk视图 mixed-rate link enable # 默认不允许速率不同eth-trunk端口加入聚合组 lacp priority priority # 配置LACP优先级,越小越高,默认32768 # 系统视图 | 接口视图 # 加入聚合组的接口才能设置(即配置端口是否活动端口) max active-linknumber {number} # 需保持两端接口数一致 # 只有LACP模式可配置最大活动接口 least active-linknumber {number} # 配置下限阈值 # LACP及手工模式都可配置 IP路由基础 路由表\n目的网络/掩码 出接口 下一跳 10.1.1.0/24 GE0/0/0 1.1.1.2 路由信息获取方式及默认优先级\n直连路由 0 静态路由 60 动态路由 OSPF内部路由 10 外部 150 display ip routing-table 查看路由表\ncost 度量值/开销值\n转发原则\n最长匹配原则\n静态路由 配置命令\nip route-static ip-address {mask | mask-length} nexthop-address # 关联下一跳IP ip route-static ip-address {mask | mask-length} interface-type interface-number # 关联出接口 ip route-static ip-address{ mask | mask-length} interface-type interface-number 缺省路由 0.0.0.0/0\n动态路由 按工作区域\n1.IGP(interior gateway protocols,内部网关协议)\nRIP OSPF IS-IS 2.EGP(exterior gateway protocols,外部网关协议)\nBGP 按工作机制及算法\n1.distance vector routing protocols,距离矢量路由协议\nRIP 2.link-state routing protocols,链路状态路由协议\nOSPF IS-IS OSPF基础 路由协议\nOSPF（Open Shortest Path First，开放式最短路径优先） IGP(Interior Gateway Protocols,内部网关协议) EGP(Exterior Gateway Protocols,外部网关协议) Distance Vector Routing Protocols,距离矢量路由协议 Link-State Routing Protocols,链路状路由协议 链路状路由协议\nLSA泛洪 -\u003e 建立路由连接 LSDB -\u003e 全网拓扑信息数据库 SPF计算 -\u003e 计算最优路径\n路由高级特征 路由递归\n等价路由\n浮动路由\n路由汇总 | 路由聚合\nCIDR(classless inter-domain routing,无类别域间路由)\n相同网络地址,汇聚为一个\n引发问题\n划分子网过大,引发环路 网络地址转换 NAT（Network Address Translation，网络地址转换）\n解决私有地址与公网地址转换,路由器实现\n静态NAT 一个私有地址配置一个共有地址\n配置命令\n# 方式一.接口视图 nat static global {global-address} inside {host-address} # global 公网IP # inside 私网IP --- # 方式二.系统视图 nat static global {global-address} inside {host-address} # 之后在接口视图开启static nat nat static enable 动态NAT 在公网地址池中随机按需使用\n配置\nnat address-group group-index start-address end-address # 创建公有地址池 # group-index 地址池编号 # 配置地址转换为ACL规则 acl number rule permit source source-address source-wildcard # 配置基础ACL,匹配需要进行动态转换的源地址范围 nat outbound acl-number address-group group-index [no-pat] # 接口视图关联地址池和ACL # no-pat 不进行端口转换 NAPT,Easy-IP NAPT(network address and port translation,网络地址端口转换)\n转换地址时连同端口也转换,实现60000+地址访问\n及动态nat最后不加no-pat\nEasy IP:无地址池\n适合HDCP,PPPoE\n配置\nacl 2000 rule 5 permit source 192.168.1.0 0.0.0.255 quit intterface GigabitEthernet0/0/1 nat outbound 2000 # easy ip核心,并绑定ACL NAT Server 公网地址:端口 绑定 私网地址:端口\n配置\n# 接口视图 nat server protocol tcp global 122.1.2.1 www inside 192.168.1.10 8080 ACL Access Control List,访问控制列表\nAAA原理与配置 AAA（ Authentication, Authorization, and Accounting）认证,授权,计费\nNAS(Network Access Server)\nAAA服务器\n不认证 本地认证 远端认证 aaa认证常用协议 RADIUS （Remote Authentication Dial-In User Service）远程认证拨入用户服务\nUDP 1812(端口) 认证 1813 计费 配置命令\naaa # 进入aaa配置视图 authentication-scheme anthentication-scheme-name # 创建认证方案 authentication-mode { hwtacacs | local | radius } # aaa视图 domain domain-name authentication-scheme authentication-scheme-name # domain视图绑定认证方案 local-user user-name password cipher password # 创建本地用户,并配置密码 # 可使用格式 user@pwd local-user user-name service service-type { {terminal | telnet | ftp | ssh | snmp | http} ppp | none } # 设置本地用户接入类型,默认全部关闭 local-user user-name privilege level level # 本地用户权限级别 display domain name default_admin # 查看配置 display aaa offline-record all # 查看用户在线信息 常用网络服务与应用 FTP 20(通信端口) 21(发起TCP连接)端口\n通信模式\nASCLL模式 binary(二进制)模式 工作模式\n主动(PORT) 被动(PASV),可控制通信端口 路由交换配置FTP\nftp [ipv6] server enable aaa local-user user-name password irreversible-cipher password local-user user-name privilege level level local-user user-name service-type ftp local-user user-name ftp-directory directory # 用户级别必须3以上 TFTP 简单文件传输协议,UDP,69\n使用\ntfpt TFTP-Server-IP get filename tfpt TFTP-Server-IP put filename telnet 23\nVTY(virtual type terminal,虚拟类型终端)\n配置\ntelnet server enable user-interface vty 0 4 # 最多支持4个用户远程登录 protocol inbound {all | telnet} # 设置通信协议,默认ssh authentication-mode {aaa | none | password} # 认证方式 set authentication password cipher # 设置密码,不同版本命令可能不同 DHCP 配置\ndhcp enable dhcp select interface # 接口视图,开启接口地址池DHCP dhcp server dns-list ip-address # 指定接口地址池DNS服务器地址 dhcp server excluded-ip-address start-ip-address [end-ip-address] # 指定不参与自动分配地址 dhcp server lease {day [ hour hour [minute minute]] | unlimited} # 配置地址租期,默认一天 --- # 全局配置 ip pool ip-pool-name network ip-address [mask {mask | mask-length}] gatewag-list ip-address dns-list ip-address lease { day day [hour hour [minute minute]] | unlimited } dhcp selecct global #接口视图开启该DHCP,即使用全局地址池 ipaddress dhcp-allowc # 客户在接口视图下获取ip DNS 递归查询,向其他服务器查询 迭代查询,告知哪里有dns解析地址 NTP(network time protocol) UDP,123\nWLAN概述 相关基础概念 Wireless LAN（无线局域网）,无线网络技术\nAP AC\nCAPWAP(Control And Provisioning of Wireless Access Points Protocol,无线接入点控制和配置协议)\n直连组网,AP最终会经过AC 旁挂组网,AP不一定要经过AC\n无线电磁波\n无线组网概念\nBSS(Basic Service Set,基本服务集)\n一个AP覆盖范围 BSS服务区域内,STA可相互通信 BSSID(Basic Service Setldentifier,基本服务集标识符)\n无线网身份标识,AP的MAC表示 SSID(Service Set Identifier,服务集标识符)\n无线网的名字 便于识别,用SSID代替BSSID VAP(Virtual Access Point,虚拟接入点)\n一个VAP生成多个AP ESS(Extend Service Set,扩展服务集)\n多AP使用同一个SSID构建的BSS组成一个更大规模的虚拟BSS CAPWAP AP与AC建立隧道\nAP获取IP地址 DHCP获取 广播获取 CAPWAP隧道建立 AP接入控制 AP版本升级(可选) AC只能控制特定版本AP AP与AC版本最好相同 CAPWAP隧道维持 控制隧道(keepalive) 数据隧道(echo request,echo responese,报文) 广域网技术 WAN（Wide Area Network，广域网）\n连接几十至几千公里的局域网\nWAN设备分类\nCE(Customer Edge,用户边缘设备) PE(Provider Edge,服务提供商边缘设备) P(Provider,服务提供商设备) 早期协议: PPP/DHLC/FR/ATM\nPPP PPPoE 网络管理与运维 SNMP 华为iMaster NCE IPV6 报头\nSDN与HFV概述 SDN（Software Defined Networking，软件定义网络） 解决传统网络难于定位等问题\n全网通过SND controler控制(转发)\niMaster NCE 网络管控层,华为关于网络层统一管控平台\nNFV（Network Functional Virtualization，网络功能虚拟化） 虚拟化\n网络编程与自动化 园区典型组网架构及实践 园区网:802.3 802.11 协议构建;概述\n","wordCount":"1418","inLanguage":"en","image":"//localhost:53605/images/papermod-cover.png","datePublished":"2021-11-08T19:58:55+08:00","dateModified":"2024-12-03T16:59:04+08:00","author":{"@type":"Person","name":"2332334"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:53605/posts/system/hw-hcia/"},"publisher":{"@type":"Organization","name":"2332334","logo":{"@type":"ImageObject","url":"//localhost:53605/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:53605/ accesskey=h title="2332334 (Alt + H)">2332334</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=//localhost:53605/archives title=活动><span>活动</span></a></li><li><a href=//localhost:53605/search/ title=搜索><span>搜索</span></a></li><li><a href=//localhost:53605/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:53605/>Home</a>&nbsp;»&nbsp;<a href=//localhost:53605/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hw Hcia</h1><div class=post-meta><span title='2021-11-08 19:58:55 +0800 CST'>2021-11-08</span>&nbsp;·&nbsp;1418 words&nbsp;·&nbsp;2332334</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#网络基础>网络基础</a><ul><li><a href=#网络类型>网络类型</a></li><li><a href=#网络拓扑>网络拓扑</a></li><li><a href=#参考模型>参考模型</a></li></ul></li><li><a href=#华为vrpversatile-routing-plaform>华为VRP(Versatile Routing Plaform)</a><ul><li><a href=#文件系统>文件系统</a></li><li><a href=#视图>视图</a></li><li><a href=#命令>命令</a></li></ul></li><li><a href=#网络层协议与ip编址>网络层协议与IP编址</a><ul><li><a href=#ipv4-32bit>IPV4 32bit</a></li><li><a href=#子网划分打脑壳>子网划分(打脑壳)</a></li><li><a href=#icmp>ICMP</a></li></ul></li><li><a href=#以太网交换基础>以太网交换基础</a><ul><li><a href=#以太网帧格式数据帧>以太网帧格式(数据帧)</a></li><li><a href=#mac地址-48bit>mac地址 48bit</a></li><li><a href=#配置>配置</a></li></ul></li><li><a href=#vlan原理与配置>VLAN原理与配置</a><ul><li><a href=#接口类型>接口类型</a></li><li><a href=#vlan配置>VLAN配置</a></li><li><a href=#vlan通信>VLAN通信</a></li></ul></li><li><a href=#stpspanning-tree-protocol生成树协议>STP(spanning tree protocol)生成树协议</a><ul><li><a href=#基本概念>基本概念</a></li><li><a href=#基础配置>基础配置</a></li><li><a href=#rstp>RSTP</a></li></ul></li><li><a href=#以太网链路聚合与交换机堆叠集群>以太网链路聚合与交换机堆叠,集群</a><ul><li><a href=#链路聚合>链路聚合</a></li><li><a href=#配置命令>配置命令</a></li></ul></li><li><a href=#ip路由基础>IP路由基础</a><ul><li><a href=#静态路由>静态路由</a></li><li><a href=#动态路由>动态路由</a></li><li><a href=#ospf基础>OSPF基础</a></li><li><a href=#路由高级特征>路由高级特征</a></li><li><a href=#网络地址转换>网络地址转换</a></li></ul></li><li><a href=#acl>ACL</a></li><li><a href=#aaa原理与配置>AAA原理与配置</a></li><li><a href=#常用网络服务与应用>常用网络服务与应用</a><ul><li><a href=#ftp>FTP</a></li><li><a href=#tftp>TFTP</a></li><li><a href=#telnet>telnet</a></li><li><a href=#dhcp>DHCP</a></li><li><a href=#dns>DNS</a></li><li><a href=#ntpnetwork-time-protocol>NTP(network time protocol)</a></li></ul></li><li><a href=#wlan概述>WLAN概述</a><ul><li><a href=#相关基础概念>相关基础概念</a></li><li><a href=#capwap>CAPWAP</a></li></ul></li><li><a href=#广域网技术>广域网技术</a><ul><li><a href=#ppp>PPP</a></li><li><a href=#pppoe>PPPoE</a></li></ul></li><li><a href=#网络管理与运维>网络管理与运维</a><ul><li><a href=#snmp>SNMP</a></li><li><a href=#华为imaster-nce>华为iMaster NCE</a></li></ul></li><li><a href=#ipv6>IPV6</a></li><li><a href=#sdn与hfv概述>SDN与HFV概述</a><ul><li><a href=#sdnsoftware-defined-networking软件定义网络>SDN（Software Defined Networking，软件定义网络）</a></li><li><a href=#nfvnetwork-functional-virtualization网络功能虚拟化>NFV（Network Functional Virtualization，网络功能虚拟化）</a></li></ul></li><li><a href=#网络编程与自动化>网络编程与自动化</a></li><li><a href=#园区典型组网架构及实践>园区典型组网架构及实践</a></li></ul></nav></div></details></div><div class=post-content><h1 id=hcia-datacom华为数通>HCIA DataCom(华为数通)<a hidden class=anchor aria-hidden=true href=#hcia-datacom华为数通>#</a></h1><h2 id=网络基础>网络基础<a hidden class=anchor aria-hidden=true href=#网络基础>#</a></h2><h3 id=网络类型>网络类型<a hidden class=anchor aria-hidden=true href=#网络类型>#</a></h3><ul><li>局域网(LAN)&ndash;local area network</li><li>城域网(MAN)&ndash;metropolitan</li><li>广域网(WAN)&ndash;wide</li></ul><h3 id=网络拓扑>网络拓扑<a hidden class=anchor aria-hidden=true href=#网络拓扑>#</a></h3><blockquote><p>网络种物理逻辑架构</p></blockquote><p>形态</p><ul><li>星型</li><li>总线型</li><li>环型</li><li>树型</li><li>全网状</li><li>部分网状</li></ul><h3 id=参考模型>参考模型<a hidden class=anchor aria-hidden=true href=#参考模型>#</a></h3><ul><li>OSI(ISO)<ul><li>应用层</li><li>表示层</li><li>会话层</li><li>传输层</li><li>网络层</li><li>数据链路层</li><li>物理层</li></ul></li><li>TCP/IP标准模型<ul><li>应用层</li><li>主机到主机层</li><li>英特网层</li><li>网络接入层</li></ul></li><li>TCP&amp;IP对等模型<ul><li>应用层<ul><li>HTTP | FTP | DNS | Telnet | DHCP | SNMP | SMTP</li></ul></li><li>传输层<ul><li>TCP | UDP | 2的16次方-1 65535端口</li></ul></li><li>网络层<ul><li>IPV4 | IPV6 | ICMP(ping) | IGMP | IP</li></ul></li><li>数据链路层<ul><li>PPPoE | MAC | Ethernet | PPP</li></ul></li><li>物理层</li></ul></li></ul><h4 id=传输层>传输层<a hidden class=anchor aria-hidden=true href=#传输层>#</a></h4><p>TCP如何保证数据准确
三次握手
seq ack</p><p>窗口滑动机制
win</p><p>TCP关闭
四次挥手
fin</p><h4 id=网络层>网络层<a hidden class=anchor aria-hidden=true href=#网络层>#</a></h4><p>路由 mac</p><p>ARP(address resolution protocol)协议</p><blockquote><p>根据IP地址获取MAC地址
广播请求</p></blockquote><ol><li>Host1 查看ARP缓存</li><li>无,ARP request</li><li>Host2 缓存APR</li><li>ARP reply</li><li>Host1 缓存ARP</li></ol><h2 id=华为vrpversatile-routing-plaform>华为VRP(Versatile Routing Plaform)<a hidden class=anchor aria-hidden=true href=#华为vrpversatile-routing-plaform>#</a></h2><blockquote><p>华为数通产品通用操作系统平台</p></blockquote><h3 id=文件系统>文件系统<a hidden class=anchor aria-hidden=true href=#文件系统>#</a></h3><ul><li>系统文件<ul><li>cc</li></ul></li><li>配置文件<ul><li>cfg,zip,dat</li></ul></li><li>补丁文件<ul><li>pat</li></ul></li><li>PAF文件<ul><li>bin</li></ul></li></ul><h3 id=视图>视图<a hidden class=anchor aria-hidden=true href=#视图>#</a></h3><p>用户界面:</p><p>console
vty(使用前需要配置)</p><ul><li>用户视图 return</li><li>系统视图 - system-view</li><li>接口视图 - interface GigbitEthenet 0/0/1</li><li>协议视图 - Huawei-ospf-1</li></ul><h3 id=命令>命令<a hidden class=anchor aria-hidden=true href=#命令>#</a></h3><h4 id=undo>undo<a hidden class=anchor aria-hidden=true href=#undo>#</a></h4><ol><li>恢复缺省</li><li>禁用功能</li><li>删除配置</li></ol><h4 id=基本配置>基本配置<a hidden class=anchor aria-hidden=true href=#基本配置>#</a></h4><table><thead><tr><th style=text-align:left>命令</th><th style=text-align:left>参数</th></tr></thead><tbody><tr><td style=text-align:left>user privilege</td><td style=text-align:left>配置指定用户界面级别</td></tr><tr><td style=text-align:left>command-privilege level</td><td style=text-align:left>设置指定视图命令级别</td></tr><tr><td style=text-align:left>set authentication cipher password</td><td style=text-align:left>配置本地认证密码</td></tr><tr><td style=text-align:left>idle-timeout</td><td style=text-align:left>超时连接时间</td></tr><tr><td style=text-align:left> </td><td style=text-align:left> </td></tr><tr><td style=text-align:left>sysname</td><td style=text-align:left>设备名</td></tr><tr><td style=text-align:left>clock timezone</td><td style=text-align:left>设置本地市区</td></tr><tr><td style=text-align:left>clock datetime</td><td style=text-align:left>设置当前时间日期</td></tr><tr><td style=text-align:left>clock daylight-saving-time</td><td style=text-align:left>设置夏令时</td></tr><tr><td style=text-align:left>系统信息</td><td style=text-align:left> </td></tr><tr><td style=text-align:left>display device ?</td><td style=text-align:left>设备信息</td></tr><tr><td style=text-align:left>display esn</td><td style=text-align:left>21980106042SL4600115 设备唯一编号</td></tr><tr><td style=text-align:left>display version</td><td style=text-align:left>版本信息</td></tr><tr><td style=text-align:left>display power</td><td style=text-align:left>电源异常时,查看相关信息</td></tr><tr><td style=text-align:left>display power system</td><td style=text-align:left>功率信息</td></tr><tr><td style=text-align:left>display voltage { all</td><td style=text-align:left>slotslot-id}</td></tr><tr><td style=text-align:left>display fan ?</td><td style=text-align:left>风扇</td></tr><tr><td style=text-align:left>display cpu-usage</td><td style=text-align:left>CPU</td></tr><tr><td style=text-align:left>display cpu-usage configuration ?</td><td style=text-align:left>查看CPU占用率的配置信息</td></tr><tr><td style=text-align:left>display memory-usage ?</td><td style=text-align:left>内存</td></tr></tbody></table><h4 id=目录操作>目录操作<a hidden class=anchor aria-hidden=true href=#目录操作>#</a></h4><table><thead><tr><th style=text-align:left>命令</th><th style=text-align:left>参数</th></tr></thead><tbody><tr><td style=text-align:left>pwd</td><td style=text-align:left>当前所在目录</td></tr><tr><td style=text-align:left>dir</td><td style=text-align:left>ls</td></tr><tr><td style=text-align:left>more</td><td style=text-align:left>查看文本内容</td></tr><tr><td style=text-align:left>cd</td><td style=text-align:left>切换</td></tr><tr><td style=text-align:left>mkdir</td><td style=text-align:left>新建目录</td></tr><tr><td style=text-align:left>rmdir</td><td style=text-align:left>删除目录</td></tr><tr><td style=text-align:left>copy</td><td style=text-align:left>复制</td></tr><tr><td style=text-align:left>move</td><td style=text-align:left>移动</td></tr><tr><td style=text-align:left>rename</td><td style=text-align:left>重名</td></tr><tr><td style=text-align:left>delete/unreserved</td><td style=text-align:left>删除/永久删除文件</td></tr><tr><td style=text-align:left>undelete</td><td style=text-align:left>恢复删除文件</td></tr><tr><td style=text-align:left>reset recycle-bin</td><td style=text-align:left>彻底删除回收站中文件</td></tr></tbody></table><h4 id=配置文件>配置文件<a hidden class=anchor aria-hidden=true href=#配置文件>#</a></h4><blockquote><p>用户视图</p></blockquote><table><thead><tr><th style=text-align:left>命令</th><th style=text-align:left>参数</th></tr></thead><tbody><tr><td style=text-align:left>display current-configuration</td><td style=text-align:left>显示当前配置文件</td></tr><tr><td style=text-align:left>display saved-configuration</td><td style=text-align:left>显示保存的配置文件</td></tr><tr><td style=text-align:left>save</td><td style=text-align:left>保存配置</td></tr><tr><td style=text-align:left>display startup</td><td style=text-align:left>查看当前启动配置文件</td></tr><tr><td style=text-align:left>starup saved-configuration</td><td style=text-align:left>配置系统下次启动时使用的配置文件</td></tr><tr><td style=text-align:left>compare configuration</td><td style=text-align:left>比较当前配置与下次启动配置文件</td></tr><tr><td style=text-align:left>reset saved-configuration</td><td style=text-align:left>清除下次启动时加载的配置文件</td></tr><tr><td style=text-align:left>display configuration candlidate</td><td style=text-align:left>当前未提交命令行信息(vrp5没有,v8的)</td></tr></tbody></table><h4 id=存储设备>存储设备<a hidden class=anchor aria-hidden=true href=#存储设备>#</a></h4><table><thead><tr><th style=text-align:left>命令</th><th style=text-align:left>参数</th></tr></thead><tbody><tr><td style=text-align:left>fdisk</td><td style=text-align:left></td></tr></tbody></table><h2 id=网络层协议与ip编址>网络层协议与IP编址<a hidden class=anchor aria-hidden=true href=#网络层协议与ip编址>#</a></h2><p>ICMP IPX IP</p><p>作用</p><ol><li>为网络层设备提供逻辑地址</li><li>数据包寻址与转发</li></ol><p>协议头
<img loading=lazy src=https://s2.loli.net/2024/12/10/adRpX6xZGnTUikf.png alt=ipv4_title></p><p>TTL(time to live) 0-255 8bit</p><blockquote><p>防止环路</p></blockquote><p>Protocol(协议号) 6/TCP 17/UDP 11/ICMP</p><h3 id=ipv4-32bit>IPV4 32bit<a hidden class=anchor aria-hidden=true href=#ipv4-32bit>#</a></h3><p>A类地址
0.0.0.0 127.255.255.255.255</p><p>B类
128.0.0.0 191.255.255.255</p><p>C类
192.0.0.0 223.255.255.255</p><p>D类
224.0.0.0 239.255.255.255</p><p>E类
240.0.0.0 255.255.255.255</p><p>私网IP</p><p>A: 10.0.0.0 10.255.255.255<br>B: 172.16.0.0 172.31.255.255<br>C: 192.168.0.0 192.168.255.255</p><p>IPV6 128bit</p><h3 id=子网划分打脑壳>子网划分(打脑壳)<a hidden class=anchor aria-hidden=true href=#子网划分打脑壳>#</a></h3><h3 id=icmp>ICMP<a hidden class=anchor aria-hidden=true href=#icmp>#</a></h3><p>internet control message protocol</p><p>IMCP重定向: 优化路由路径,实现更优路径
差错检测: ping
错误报告: tracert</p><h2 id=以太网交换基础>以太网交换基础<a hidden class=anchor aria-hidden=true href=#以太网交换基础>#</a></h2><p>局域网中通用,常见协议</p><p>以太网是建立在CSMA/CD(carrier sense multiple access/collision detection 载波监听多路访问/冲突检测)机制上的广播型网络</p><p>早期无交换机分割局域网,抢占式的,出现冲突域,CMSA/CD缓解冲突</p><blockquote><p>交换机隔离冲突域 不能隔离广播域</p></blockquote><p>以太网二层接口类型</p><p>1.Access: 一般链接主机与交换机<br>2.Trunk: 一般连接交换机与交换机<br>3.Hybrid: 可看作前面两个接口结合</p><h3 id=以太网帧格式数据帧>以太网帧格式(数据帧)<a hidden class=anchor aria-hidden=true href=#以太网帧格式数据帧>#</a></h3><ul><li>Ethernet_Ⅱ</li><li>IEEE 802.3</li></ul><p><img loading=lazy src=https://s2.loli.net/2024/12/10/36s7oiKlJSjXWbC.png alt=ethernet></p><h3 id=mac地址-48bit>mac地址 48bit<a hidden class=anchor aria-hidden=true href=#mac地址-48bit>#</a></h3><blockquote><p>ex:00-1E-10-DD-DD-02 001E-10DD-DD02</p></blockquote><ol><li>OUI(organizationally unique ldentifier) 厂商代码 24bit</li><li>制造商分配 24bit</li></ol><blockquote><p>按目的mac地址区分:单播地址 广播地址 组播地址
以太网帧: 单播帧 广播帧 组播帧</p></blockquote><p>未知单播帧</p><p>交换机转发行为</p><ul><li>泛洪</li><li>转发</li><li>丢弃</li></ul><p>| arp -a | ARP缓存表 |
| display mac-address verbose | mac地址表 |</p><h3 id=配置>配置<a hidden class=anchor aria-hidden=true href=#配置>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>system-view
</span></span><span class=line><span class=cl>interface GigabitEthernet 0/0/1
</span></span><span class=line><span class=cl>undo negotiation auto
</span></span><span class=line><span class=cl>speed <span class=m>1000</span>
</span></span><span class=line><span class=cl><span class=c1>#接口速率</span>
</span></span><span class=line><span class=cl>duplex full
</span></span><span class=line><span class=cl><span class=c1>#全双工</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证</span>
</span></span><span class=line><span class=cl>sidplay interface GibabitEehernet 0/0/1
</span></span></code></pre></div><h2 id=vlan原理与配置>VLAN原理与配置<a hidden class=anchor aria-hidden=true href=#vlan原理与配置>#</a></h2><blockquote><p>VLAN(virtual local area network) 虚拟局域网
划分广播域</p></blockquote><p>Vlan Tag</p><p>Vlan帧</p><blockquote><p>802.1Qtag</p></blockquote><p><img loading=lazy src=https://s2.loli.net/2024/12/10/J39rno1fuV6SLPM.png alt=vlan帧></p><p>VLAN划分方式</p><ul><li>接口</li><li>mac</li><li>ip子网</li><li>协议</li><li>策略</li></ul><blockquote><p>PVID,默认1,每个端口只有一个(1-4094)</p></blockquote><h3 id=接口类型>接口类型<a hidden class=anchor aria-hidden=true href=#接口类型>#</a></h3><ul><li>Access(主机与交换机,只能处理一个标签)</li><li>Trunk(交换机,处理多个标签)</li><li>Hybrid(前两个结合)<ul><li>tagged 和 untagged 控制出口</li><li>设置PVID</li></ul></li></ul><p><img loading=lazy src=https://s2.loli.net/2024/12/10/XK9shRPErk4Wgw3.png alt=标签解析></p><h3 id=vlan配置>VLAN配置<a hidden class=anchor aria-hidden=true href=#vlan配置>#</a></h3><p>基础配置</p><blockquote><p>undo portswitch # 二层接口切换为三层</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#系统视图</span>
</span></span><span class=line><span class=cl><span class=c1>#创建VLAN</span>
</span></span><span class=line><span class=cl>vlan vlan-id
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#批量创建</span>
</span></span><span class=line><span class=cl>vlan batch <span class=o>{</span>vlan-id1 <span class=o>[</span>to vlan-id2<span class=o>]}</span>
</span></span><span class=line><span class=cl><span class=c1># batch -- VLAN ID</span>
</span></span><span class=line><span class=cl><span class=c1># vlan-id1 -- 起始VLAN编号</span>
</span></span><span class=line><span class=cl><span class=c1># vlan-id2 -- 末尾VLAN编号</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看VLAN</span>
</span></span><span class=line><span class=cl>display vlan
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Access</span>
</span></span><span class=line><span class=cl><span class=c1># 接口视图</span>
</span></span><span class=line><span class=cl><span class=c1># 配置接口类型</span>
</span></span><span class=line><span class=cl>port link-type access
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置Access接口缺省VLAN</span>
</span></span><span class=line><span class=cl>prot default vlan vlan-id
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- 
</span></span><span class=line><span class=cl><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>
</span></span><span class=line><span class=cl><span class=c1># Trunk</span>
</span></span><span class=line><span class=cl><span class=c1># 接口视图</span>
</span></span><span class=line><span class=cl>port link-type trunk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trunk端口指定VLAN</span>
</span></span><span class=line><span class=cl>prot trunk allow-pass vlan <span class=o>{{</span>vlan-id<span class=o>[</span>to vlan-id2<span class=o>]}}</span> <span class=p>|</span> all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trunk口缺省VLAN</span>
</span></span><span class=line><span class=cl>port trunk pvid vlan vlan-id
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hybrid</span>
</span></span><span class=line><span class=cl><span class=c1># 配置接口类型</span>
</span></span><span class=line><span class=cl>prot link-type hybrid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hybrid指定VLan 不能同时包含在两个列表中</span>
</span></span><span class=line><span class=cl>prot hybrid untagged vlan <span class=o>{</span>vlan-id1 <span class=o>[</span>to vlan-id2<span class=o>]}</span> <span class=p>|</span> all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>prot hybrid tagged vlan <span class=o>{</span>vlan-id1 <span class=o>[</span>to vlan-id2<span class=o>]}</span> <span class=p>|</span> all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hybrid口缺省VLAN</span>
</span></span><span class=line><span class=cl>prot hybrid pvid vlan vlan-id
</span></span></code></pre></div><h4 id=mac-绑定-vlan>MAC 绑定 VLAN<a hidden class=anchor aria-hidden=true href=#mac-绑定-vlan>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># VLAN视图</span>
</span></span><span class=line><span class=cl>mac-vlan mac-address mac-address <span class=o>{</span>mac-address-mask<span class=p>|</span>mac-address-mask-length<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># mac地址| mac地址掩码 | mac地址长度1-48</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使能MAC地址与VLAN</span>
</span></span><span class=line><span class=cl><span class=c1># 接口视图</span>
</span></span><span class=line><span class=cl>mac-vlan <span class=nb>enable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>display mac-vlan mac-address all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dis mac-vlan vlanID
</span></span></code></pre></div><h3 id=vlan通信>VLAN通信<a hidden class=anchor aria-hidden=true href=#vlan通信>#</a></h3><p>三层交换机实现</p><ul><li>物理接口<ul><li>交换机配置access口,并划分vlan</li><li>路由器配置ip地址,与交换机连接线缆,实现三层通信</li></ul></li><li>子接口</li><li>vlanif</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 子接口配置</span>
</span></span><span class=line><span class=cl>interface GigabitEthernet0/0/0.10
</span></span><span class=line><span class=cl>dot1q termination vid <span class=m>10</span>
</span></span><span class=line><span class=cl>ip address ipaddress
</span></span><span class=line><span class=cl>arp broadcast <span class=nb>enable</span>
</span></span><span class=line><span class=cl><span class=c1># 最后开启arp广播</span>
</span></span></code></pre></div><p>vlanif</p><blockquote><p>存在数据链路层</p></blockquote><h2 id=stpspanning-tree-protocol生成树协议>STP(spanning tree protocol)生成树协议<a hidden class=anchor aria-hidden=true href=#stpspanning-tree-protocol生成树协议>#</a></h2><blockquote><p>通过阻塞端口消除环路,实现链路备份
RSTP（Rapid Spanning Tree Protocol,快速生成树协议）协议基于STP协议,实现网络拓扑快速收敛
MSTP(默认)</p></blockquote><p>IEEE 802.1D</p><p>二层环路典型问题</p><ul><li>广播风暴</li><li>mac地址漂移</li></ul><p>操作步骤</p><ol><li>选举一个根桥,会出现抢占,谁优先级高谁为根</li><li>非根交换机选举一个根端口</li><li>网段选举一个指定端口</li><li>阻塞非根,非指定端口</li></ol><h3 id=基本概念>基本概念<a hidden class=anchor aria-hidden=true href=#基本概念>#</a></h3><h4 id=根桥桥id>根桥(桥ID)<a hidden class=anchor aria-hidden=true href=#根桥桥id>#</a></h4><p>BID由16位的桥优先级(bridge priority)与桥MAC地址构成(唯一)</p><p>16bit bp 48bit mac</p><p>BID最小被选举为根桥</p><ol><li>先比较端口优先级</li><li>之后比较MAC地址</li></ol><h4 id=开销cost>开销(Cost)<a hidden class=anchor aria-hidden=true href=#开销cost>#</a></h4><blockquote><p>用于计算根路径开销,即到达根的开销</p></blockquote><p>带宽大,cost小,可配置</p><p><img loading=lazy src=https://s2.loli.net/2024/12/10/lkg3yPwEVXOR4GY.png alt=开销计算表.png></p><h4 id=rpcroot-path-cost根路径开销>RPC(root path cost,根路径开销)<a hidden class=anchor aria-hidden=true href=#rpcroot-path-cost根路径开销>#</a></h4><p>接口到根的RPC = 路途所有入方向cost累加</p><h4 id=端口idpidport-id>端口ID(PID,port ID)<a hidden class=anchor aria-hidden=true href=#端口idpidport-id>#</a></h4><p>由 高4bit接口优先级 + 低12bit接口编号 组成
默认128</p><h4 id=bpdubridge-protocol-data-unit网桥协议数据单元>BPDU(bridge protocol data unit,网桥协议数据单元)<a hidden class=anchor aria-hidden=true href=#bpdubridge-protocol-data-unit网桥协议数据单元>#</a></h4><p>STP协议报文,用于STP网络拓扑计算</p><ul><li>配置BPDU(configuration BPDU)</li><li>TCN BPDU(topology change notification BPDU)<ul><li>网络拓扑改变时发送</li></ul></li></ul><p><img loading=lazy src=https://s2.loli.net/2024/12/10/Y6c52Jj7VanuofD.png alt=BPDU报文.png></p><h3 id=基础配置>基础配置<a hidden class=anchor aria-hidden=true href=#基础配置>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 配置工作模式</span>
</span></span><span class=line><span class=cl>stp mode <span class=o>{</span>stp <span class=p>|</span> rstp <span class=p>|</span> mstp<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置根桥</span>
</span></span><span class=line><span class=cl>stp root primary
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 备份根桥(优先级4096)</span>
</span></span><span class=line><span class=cl>stp root secondary
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 优先级(默认32768)</span>
</span></span><span class=line><span class=cl>stp priority priority
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 接口开销类型(默认IEEE 802.1t即dit1t)</span>
</span></span><span class=line><span class=cl>stp pathcost-standard <span class=o>{</span> dot1d-1998 <span class=p>|</span> dot1t <span class=p>|</span> legacy <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置开销值</span>
</span></span><span class=line><span class=cl>stp cost cost
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 接口优先级(缺省为128)</span>
</span></span><span class=line><span class=cl>stp priority priority
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启用STP/RSTP/MSTP</span>
</span></span><span class=line><span class=cl>stp <span class=nb>enable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 批量配置边缘端口</span>
</span></span><span class=line><span class=cl>interface range GigabitEthernet 0/0/10 to GigabitEthernet 0/0/20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>group-number GigabitEthernet 0/0/10 to GigabitEthernet 0/0/20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置边缘端口</span>
</span></span><span class=line><span class=cl>stp edged-port <span class=nb>enable</span>
</span></span></code></pre></div><h3 id=rstp>RSTP<a hidden class=anchor aria-hidden=true href=#rstp>#</a></h3><blockquote><p>IEEE 802.1w</p></blockquote><p>新增端口类型</p><ul><li>备份端口</li><li>边缘端口</li></ul><p>接口类型减少至三个</p><ul><li>forwarding</li><li>learning</li><li>discarding</li></ul><p>VBST: 基于VLAN的STP
MSTP: 多生成树</p><h2 id=以太网链路聚合与交换机堆叠集群>以太网链路聚合与交换机堆叠,集群<a hidden class=anchor aria-hidden=true href=#以太网链路聚合与交换机堆叠集群>#</a></h2><blockquote><p>网络冗余备份,链路聚合,避免单点故障</p></blockquote><p>具体实现</p><ul><li>单板</li><li>设备</li></ul><h3 id=链路聚合>链路聚合<a hidden class=anchor aria-hidden=true href=#链路聚合>#</a></h3><p>提升链路带宽</p><p>Eth-Trunk(以太网链路聚合)</p><p>相关概念</p><ul><li>聚合组(Link Aggregation Group,LAG)</li><li>成员接口与成员链路</li><li>活动接口 | 活动链路</li><li>非活动接口 | 非活动链路</li><li>聚合模式:手工模式,LACP</li><li>活动接口上,下限</li></ul><p>链路聚合控制协议数据单元(link aggregation control protocol data unit,LACPDU)</p><blockquote><p>默认系统优先级 32768</p></blockquote><h3 id=配置命令>配置命令<a hidden class=anchor aria-hidden=true href=#配置命令>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>interface eth-trunk trunk-id
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mode <span class=o>{</span>lacp / manual load-balance<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 须保持两端链路聚合模式相同,lacp 或者 手工</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>eth-trunk trunk-id
</span></span><span class=line><span class=cl><span class=c1># 接口视图加入trunkID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>trunkport interface-type <span class=o>{</span>interface-number<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># eth-trunk视图</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mixed-rate link <span class=nb>enable</span>
</span></span><span class=line><span class=cl><span class=c1># 默认不允许速率不同eth-trunk端口加入聚合组</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>lacp priority priority
</span></span><span class=line><span class=cl><span class=c1># 配置LACP优先级,越小越高,默认32768</span>
</span></span><span class=line><span class=cl><span class=c1># 系统视图 | 接口视图</span>
</span></span><span class=line><span class=cl><span class=c1># 加入聚合组的接口才能设置(即配置端口是否活动端口)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>max active-linknumber <span class=o>{</span>number<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 需保持两端接口数一致</span>
</span></span><span class=line><span class=cl><span class=c1># 只有LACP模式可配置最大活动接口</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>least active-linknumber <span class=o>{</span>number<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 配置下限阈值</span>
</span></span><span class=line><span class=cl><span class=c1># LACP及手工模式都可配置</span>
</span></span></code></pre></div><h2 id=ip路由基础>IP路由基础<a hidden class=anchor aria-hidden=true href=#ip路由基础>#</a></h2><p>路由表</p><table><thead><tr><th style=text-align:left>目的网络/掩码</th><th style=text-align:left>出接口</th><th style=text-align:left>下一跳</th></tr></thead><tbody><tr><td style=text-align:left>10.1.1.0/24</td><td style=text-align:left>GE0/0/0</td><td style=text-align:left>1.1.1.2</td></tr></tbody></table><p>路由信息获取方式及默认优先级</p><ul><li>直连路由 0</li><li>静态路由 60</li><li>动态路由 OSPF内部路由 10 外部 150</li></ul><p><code>display ip routing-table</code>
查看路由表</p><p>cost 度量值/开销值</p><p>转发原则</p><p><code>最长匹配原则</code></p><h3 id=静态路由>静态路由<a hidden class=anchor aria-hidden=true href=#静态路由>#</a></h3><p>配置命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ip route-static ip-address <span class=o>{</span>mask <span class=p>|</span> mask-length<span class=o>}</span> nexthop-address
</span></span><span class=line><span class=cl><span class=c1># 关联下一跳IP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ip route-static ip-address <span class=o>{</span>mask <span class=p>|</span> mask-length<span class=o>}</span> interface-type interface-number
</span></span><span class=line><span class=cl><span class=c1># 关联出接口</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ip route-static ip-address<span class=o>{</span> mask <span class=p>|</span> mask-length<span class=o>}</span> interface-type interface-number
</span></span></code></pre></div><blockquote><p>缺省路由 0.0.0.0/0</p></blockquote><h3 id=动态路由>动态路由<a hidden class=anchor aria-hidden=true href=#动态路由>#</a></h3><p>按工作区域</p><p>1.IGP(interior gateway protocols,内部网关协议)</p><ul><li>RIP</li><li>OSPF</li><li>IS-IS</li></ul><p>2.EGP(exterior gateway protocols,外部网关协议)</p><ul><li>BGP</li></ul><p>按工作机制及算法</p><p>1.distance vector routing protocols,距离矢量路由协议</p><ul><li>RIP</li></ul><p>2.link-state routing protocols,链路状态路由协议</p><ul><li>OSPF</li><li>IS-IS</li></ul><h3 id=ospf基础>OSPF基础<a hidden class=anchor aria-hidden=true href=#ospf基础>#</a></h3><p>路由协议</p><ul><li>OSPF（Open Shortest Path First，开放式最短路径优先）</li><li>IGP(Interior Gateway Protocols,内部网关协议)</li><li>EGP(Exterior Gateway Protocols,外部网关协议)</li><li>Distance Vector Routing Protocols,距离矢量路由协议</li><li>Link-State Routing Protocols,链路状路由协议</li></ul><p>链路状路由协议</p><p>LSA泛洪 -> 建立路由连接
LSDB -> 全网拓扑信息数据库
SPF计算 -> 计算最优路径</p><h3 id=路由高级特征>路由高级特征<a hidden class=anchor aria-hidden=true href=#路由高级特征>#</a></h3><p>路由递归</p><p>等价路由</p><p>浮动路由</p><hr><p>路由汇总 | 路由聚合</p><p>CIDR(classless inter-domain routing,无类别域间路由)</p><blockquote><p>相同网络地址,汇聚为一个</p></blockquote><p>引发问题</p><ul><li>划分子网过大,引发环路</li></ul><h3 id=网络地址转换>网络地址转换<a hidden class=anchor aria-hidden=true href=#网络地址转换>#</a></h3><blockquote><p>NAT（Network Address Translation，网络地址转换）</p></blockquote><p>解决私有地址与公网地址转换,路由器实现</p><h4 id=静态nat>静态NAT<a hidden class=anchor aria-hidden=true href=#静态nat>#</a></h4><p>一个私有地址配置一个共有地址</p><p>配置命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 方式一.接口视图</span>
</span></span><span class=line><span class=cl>nat static global <span class=o>{</span>global-address<span class=o>}</span> inside <span class=o>{</span>host-address<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># global 公网IP</span>
</span></span><span class=line><span class=cl><span class=c1># inside 私网IP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方式二.系统视图</span>
</span></span><span class=line><span class=cl>nat static global <span class=o>{</span>global-address<span class=o>}</span> inside <span class=o>{</span>host-address<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 之后在接口视图开启static nat</span>
</span></span><span class=line><span class=cl>nat static <span class=nb>enable</span>
</span></span></code></pre></div><h4 id=动态nat>动态NAT<a hidden class=anchor aria-hidden=true href=#动态nat>#</a></h4><p>在公网地址池中随机按需使用</p><p>配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nat address-group group-index start-address end-address
</span></span><span class=line><span class=cl><span class=c1># 创建公有地址池</span>
</span></span><span class=line><span class=cl><span class=c1># group-index 地址池编号</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置地址转换为ACL规则</span>
</span></span><span class=line><span class=cl>acl number
</span></span><span class=line><span class=cl>rule permit <span class=nb>source</span> source-address source-wildcard
</span></span><span class=line><span class=cl><span class=c1># 配置基础ACL,匹配需要进行动态转换的源地址范围</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nat outbound acl-number address-group group-index <span class=o>[</span>no-pat<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># 接口视图关联地址池和ACL</span>
</span></span><span class=line><span class=cl><span class=c1># no-pat 不进行端口转换</span>
</span></span></code></pre></div><h4 id=napteasy-ip>NAPT,Easy-IP<a hidden class=anchor aria-hidden=true href=#napteasy-ip>#</a></h4><p>NAPT(network address and port translation,网络地址端口转换)</p><blockquote><p>转换地址时连同端口也转换,实现<code>60000+</code>地址访问</p></blockquote><p>及动态nat最后不加no-pat</p><hr><p>Easy IP:无地址池</p><blockquote><p>适合HDCP,PPPoE</p></blockquote><p>配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acl <span class=m>2000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rule <span class=m>5</span> permit <span class=nb>source</span> 192.168.1.0 0.0.0.255
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>quit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>intterface GigabitEthernet0/0/1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nat outbound <span class=m>2000</span>
</span></span><span class=line><span class=cl><span class=c1># easy ip核心,并绑定ACL</span>
</span></span></code></pre></div><h4 id=nat-server>NAT Server<a hidden class=anchor aria-hidden=true href=#nat-server>#</a></h4><p>公网地址:端口 绑定 私网地址:端口</p><p>配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 接口视图</span>
</span></span><span class=line><span class=cl>nat server protocol tcp global 122.1.2.1 www inside 192.168.1.10 <span class=m>8080</span>
</span></span></code></pre></div><h2 id=acl>ACL<a hidden class=anchor aria-hidden=true href=#acl>#</a></h2><blockquote><p>Access Control List,访问控制列表</p></blockquote><h2 id=aaa原理与配置>AAA原理与配置<a hidden class=anchor aria-hidden=true href=#aaa原理与配置>#</a></h2><blockquote><p>AAA（ Authentication, Authorization, and Accounting）认证,授权,计费</p></blockquote><p>NAS(Network Access Server)</p><p>AAA服务器</p><ul><li>不认证</li><li>本地认证</li><li>远端认证</li></ul><p>aaa认证常用协议
RADIUS （Remote Authentication Dial-In User Service）远程认证拨入用户服务</p><ul><li>UDP</li><li>1812(端口) 认证</li><li>1813 计费</li></ul><p>配置命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aaa
</span></span><span class=line><span class=cl><span class=c1># 进入aaa配置视图</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>authentication-scheme anthentication-scheme-name
</span></span><span class=line><span class=cl><span class=c1># 创建认证方案</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>authentication-mode <span class=o>{</span> hwtacacs <span class=p>|</span> <span class=nb>local</span> <span class=p>|</span> radius <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># aaa视图</span>
</span></span><span class=line><span class=cl>domain domain-name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>authentication-scheme authentication-scheme-name
</span></span><span class=line><span class=cl><span class=c1># domain视图绑定认证方案</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>local-user user-name password cipher password
</span></span><span class=line><span class=cl><span class=c1># 创建本地用户,并配置密码</span>
</span></span><span class=line><span class=cl><span class=c1># 可使用格式 user@pwd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>local-user user-name service service-type <span class=o>{</span> <span class=o>{</span>terminal <span class=p>|</span> telnet <span class=p>|</span> ftp <span class=p>|</span> ssh <span class=p>|</span> snmp <span class=p>|</span> http<span class=o>}</span> ppp <span class=p>|</span> none <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 设置本地用户接入类型,默认全部关闭</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>local-user user-name privilege level level
</span></span><span class=line><span class=cl><span class=c1># 本地用户权限级别</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>display domain name default_admin
</span></span><span class=line><span class=cl><span class=c1># 查看配置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>display aaa offline-record all
</span></span><span class=line><span class=cl><span class=c1># 查看用户在线信息</span>
</span></span></code></pre></div><h2 id=常用网络服务与应用>常用网络服务与应用<a hidden class=anchor aria-hidden=true href=#常用网络服务与应用>#</a></h2><h3 id=ftp>FTP<a hidden class=anchor aria-hidden=true href=#ftp>#</a></h3><blockquote><p>20(通信端口) 21(发起TCP连接)端口</p></blockquote><p>通信模式</p><ul><li>ASCLL模式</li><li>binary(二进制)模式</li></ul><p>工作模式</p><ul><li>主动(PORT)</li><li>被动(PASV),可控制通信端口</li></ul><p>路由交换配置FTP</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ftp <span class=o>[</span>ipv6<span class=o>]</span> server <span class=nb>enable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>aaa
</span></span><span class=line><span class=cl>local-user user-name password irreversible-cipher password
</span></span><span class=line><span class=cl>local-user user-name privilege level level
</span></span><span class=line><span class=cl>local-user user-name service-type ftp
</span></span><span class=line><span class=cl>local-user user-name ftp-directory directory
</span></span><span class=line><span class=cl><span class=c1># 用户级别必须3以上</span>
</span></span></code></pre></div><h3 id=tftp>TFTP<a hidden class=anchor aria-hidden=true href=#tftp>#</a></h3><blockquote><p>简单文件传输协议,UDP,69</p></blockquote><p>使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tfpt TFTP-Server-IP get filename
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>tfpt TFTP-Server-IP put filename
</span></span></code></pre></div><h3 id=telnet>telnet<a hidden class=anchor aria-hidden=true href=#telnet>#</a></h3><blockquote><p>23</p></blockquote><p>VTY(virtual type terminal,虚拟类型终端)</p><p>配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>telnet server <span class=nb>enable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>user-interface vty <span class=m>0</span> <span class=m>4</span>
</span></span><span class=line><span class=cl><span class=c1># 最多支持4个用户远程登录</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>protocol inbound <span class=o>{</span>all <span class=p>|</span> telnet<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 设置通信协议,默认ssh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>authentication-mode <span class=o>{</span>aaa <span class=p>|</span> none <span class=p>|</span> password<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 认证方式</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>set</span> authentication password cipher
</span></span><span class=line><span class=cl><span class=c1># 设置密码,不同版本命令可能不同</span>
</span></span></code></pre></div><h3 id=dhcp>DHCP<a hidden class=anchor aria-hidden=true href=#dhcp>#</a></h3><p>配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dhcp <span class=nb>enable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dhcp <span class=k>select</span> interface
</span></span><span class=line><span class=cl><span class=c1># 接口视图,开启接口地址池DHCP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dhcp server dns-list ip-address
</span></span><span class=line><span class=cl><span class=c1># 指定接口地址池DNS服务器地址</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dhcp server excluded-ip-address start-ip-address <span class=o>[</span>end-ip-address<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># 指定不参与自动分配地址</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dhcp server lease <span class=o>{</span>day <span class=o>[</span> hour hour <span class=o>[</span>minute minute<span class=o>]]</span> <span class=p>|</span> unlimited<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 配置地址租期,默认一天</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl><span class=c1># 全局配置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ip pool ip-pool-name
</span></span><span class=line><span class=cl>network ip-address <span class=o>[</span>mask <span class=o>{</span>mask <span class=p>|</span> mask-length<span class=o>}]</span>
</span></span><span class=line><span class=cl>gatewag-list ip-address
</span></span><span class=line><span class=cl>dns-list ip-address
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>lease <span class=o>{</span> day day <span class=o>[</span>hour hour <span class=o>[</span>minute minute<span class=o>]]</span> <span class=p>|</span> unlimited <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dhcp selecct global
</span></span><span class=line><span class=cl><span class=c1>#接口视图开启该DHCP,即使用全局地址池</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ipaddress dhcp-allowc
</span></span><span class=line><span class=cl><span class=c1># 客户在接口视图下获取ip</span>
</span></span></code></pre></div><h3 id=dns>DNS<a hidden class=anchor aria-hidden=true href=#dns>#</a></h3><ul><li>递归查询,向其他服务器查询</li><li>迭代查询,告知哪里有dns解析地址</li></ul><h3 id=ntpnetwork-time-protocol>NTP(network time protocol)<a hidden class=anchor aria-hidden=true href=#ntpnetwork-time-protocol>#</a></h3><blockquote><p>UDP,123</p></blockquote><h2 id=wlan概述>WLAN概述<a hidden class=anchor aria-hidden=true href=#wlan概述>#</a></h2><h3 id=相关基础概念>相关基础概念<a hidden class=anchor aria-hidden=true href=#相关基础概念>#</a></h3><blockquote><p>Wireless LAN（无线局域网）,无线网络技术</p></blockquote><p>AP AC</p><p>CAPWAP(Control And Provisioning of Wireless Access Points Protocol,无线接入点控制和配置协议)</p><p>直连组网,AP最终会经过AC
旁挂组网,AP不一定要经过AC</p><p><strong>无线电磁波</strong></p><p><img loading=lazy src alt=无限电磁波频谱></p><p><strong>无线组网概念</strong></p><p>BSS(Basic Service Set,基本服务集)</p><ul><li>一个AP覆盖范围</li><li>BSS服务区域内,STA可相互通信</li></ul><p>BSSID(Basic Service Setldentifier,基本服务集标识符)</p><ul><li>无线网身份标识,AP的MAC表示</li></ul><p>SSID(Service Set Identifier,服务集标识符)</p><ul><li>无线网的名字</li><li>便于识别,用SSID代替BSSID</li></ul><p>VAP(Virtual Access Point,虚拟接入点)</p><ul><li>一个VAP生成多个AP</li></ul><p>ESS(Extend Service Set,扩展服务集)</p><ul><li>多AP使用同一个SSID构建的BSS组成一个更大规模的虚拟BSS</li></ul><h3 id=capwap>CAPWAP<a hidden class=anchor aria-hidden=true href=#capwap>#</a></h3><p>AP与AC建立隧道</p><ol><li>AP获取IP地址<ul><li>DHCP获取</li><li>广播获取</li></ul></li><li>CAPWAP隧道建立</li><li>AP接入控制</li><li>AP版本升级(可选)<ul><li>AC只能控制特定版本AP</li><li>AP与AC版本最好相同</li></ul></li><li>CAPWAP隧道维持<ul><li>控制隧道(keepalive)</li><li>数据隧道(echo request,echo responese,报文)</li></ul></li></ol><p><img loading=lazy src alt=常见网线接入安全协议></p><h2 id=广域网技术>广域网技术<a hidden class=anchor aria-hidden=true href=#广域网技术>#</a></h2><blockquote><p>WAN（Wide Area Network，广域网）</p></blockquote><p>连接几十至几千公里的局域网</p><p>WAN设备分类</p><ul><li>CE(Customer Edge,用户边缘设备)</li><li>PE(Provider Edge,服务提供商边缘设备)</li><li>P(Provider,服务提供商设备)</li></ul><p>早期协议: PPP/DHLC/FR/ATM</p><h3 id=ppp>PPP<a hidden class=anchor aria-hidden=true href=#ppp>#</a></h3><h3 id=pppoe>PPPoE<a hidden class=anchor aria-hidden=true href=#pppoe>#</a></h3><h2 id=网络管理与运维>网络管理与运维<a hidden class=anchor aria-hidden=true href=#网络管理与运维>#</a></h2><h3 id=snmp>SNMP<a hidden class=anchor aria-hidden=true href=#snmp>#</a></h3><h3 id=华为imaster-nce>华为iMaster NCE<a hidden class=anchor aria-hidden=true href=#华为imaster-nce>#</a></h3><h2 id=ipv6>IPV6<a hidden class=anchor aria-hidden=true href=#ipv6>#</a></h2><p>报头</p><h2 id=sdn与hfv概述>SDN与HFV概述<a hidden class=anchor aria-hidden=true href=#sdn与hfv概述>#</a></h2><h3 id=sdnsoftware-defined-networking软件定义网络>SDN（Software Defined Networking，软件定义网络）<a hidden class=anchor aria-hidden=true href=#sdnsoftware-defined-networking软件定义网络>#</a></h3><p>解决传统网络难于定位等问题</p><p>全网通过SND controler控制(转发)</p><p><strong>iMaster NCE</strong> 网络管控层,华为关于网络层统一管控平台</p><h3 id=nfvnetwork-functional-virtualization网络功能虚拟化>NFV（Network Functional Virtualization，网络功能虚拟化）<a hidden class=anchor aria-hidden=true href=#nfvnetwork-functional-virtualization网络功能虚拟化>#</a></h3><p>虚拟化</p><h2 id=网络编程与自动化>网络编程与自动化<a hidden class=anchor aria-hidden=true href=#网络编程与自动化>#</a></h2><h2 id=园区典型组网架构及实践>园区典型组网架构及实践<a hidden class=anchor aria-hidden=true href=#园区典型组网架构及实践>#</a></h2><p>园区网:802.3 802.11 协议构建;概述</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=//localhost:53605/posts/web/html_css/><span class=title>« Prev</span><br><span>HTML && CSS</span>
</a><a class=next href=//localhost:53605/posts/software/hydra-trygetpassword/><span class=title>Next »</span><br><span>Hydra TryGetPassword</span></a></nav></footer></article></main><footer class=footer><span>© <a href=https://github.com/adityatelange/hugo-PaperMod/graphs/contributors>2332334</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>