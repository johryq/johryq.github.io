<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>VUE | 2332334</title>
<meta name=keywords content><meta name=description content="VUE - 2332334"><meta name=author content="2332334"><link rel=canonical href=blog.2332334.xyz/posts/web/vue/><link crossorigin=anonymous href=blog.2332334.xyz/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=blog.2332334.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=blog.2332334.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=blog.2332334.xyz/favicon-32x32.png><link rel=apple-touch-icon href=blog.2332334.xyz/apple-touch-icon.png><link rel=mask-icon href=blog.2332334.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=blog.2332334.xyz/posts/web/vue/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="blog.2332334.xyz/posts/web/vue/"><meta property="og:site_name" content="2332334"><meta property="og:title" content="VUE"><meta property="og:description" content="false"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-08T19:58:55+08:00"><meta property="article:modified_time" content="2024-12-04T09:05:21+08:00"><meta property="og:image" content="blog.2332334.xyz/images/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="blog.2332334.xyz/images/papermod-cover.png"><meta name=twitter:title content="VUE"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"blog.2332334.xyz/posts/"},{"@type":"ListItem","position":2,"name":"VUE","item":"blog.2332334.xyz/posts/web/vue/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"VUE","name":"VUE","description":"","keywords":[],"articleBody":"Vue start 2021年3月19日\nupdate 2022-8-19\nend\n前端渐进式框架\n前端三大框架\nVue Angular React 一 vue基础语法 模版语法 1. 文本插值 mustache 语法，插值表达式； \u003cspan\u003e{{msg}}\u003c/span\u003e \u003cp v-html=\"innerHTML\"\u003e\u003c/p\u003e \u003ctd v-for=\"(value,key,index) in items\" {{value}} :key= 'val.id'\u003ethis is table tag\u003c/td\u003e \u003cp v-if=\"isDisable\"\u003ein shot\u003c/p\u003e 2. Attribute bind \u003cdiv v-bind:id='box1'\u003e\u003c/div\u003e \u003cdiv :id='box1'\u003e\u003c/div\u003e 绑定多个对象\n\u003cscript\u003e data(){ return { objOfAttrs: { id: 'box02', class: 'container' } } } \u003c/script\u003e \u003cdiv :objOfAttrs\u003e\u003c/div\u003e 3. event bind v-on:click=\"btnClick()\" @click=\"btnClick\" $event // 事件对象，可做参数传递 || 无参数默认传递，有参数需带该固定参数对象 \u003ca @keyup.esc='clickEst'\u003e\u003c/a\u003e // 按键修饰符 \u003ca @click.prevent=\"\"\u003e\u003c/a\u003e event.preventDefault(); // 阻止默认行为 \u003ca @click.stop=\"\"\u003e\u003c/a\u003e event.stopPropagation(); // 阻止冒泡 \u003ca @click.capture=\"\"\u003e\u003c/a\u003e // 捕获模式触发当前事件 \u003ca @click.once=\"\"\u003e\u003c/a\u003e // 绑定事件触发一次 \u003ca @click.self=\"\"\u003e\u003c/a\u003e // 只有 event.target 是当前元素自身时触发事件处理函数 事件修饰符(event modifiers)\nprevent stop once key|key num bind注意信息 动态参数\n\u003ca :[attributeName]=\"url\"\u003e\u003c/a\u003e \u003ca @[eventName]='doSomeThing'\u003e\u003c/a\u003e 动态参数注意\n值 只能为字符串 or null， null则移除该属性 参数名 不可含有 空格 或者 引号,大写会自动转换为小写 以上：插值表达式 or v-开头的attribute中皆可使用js表达式，既：如下\n{{ number + 1 -1 * 1 / 1}} {{ isOK ? 'yes' : 'no'}} {{ str.trim().split('-').reverse().join('+') }} \u003cdiv :id=\"list-`${list.id}`\"\u003e\u003c/div\u003e 以上 bind 仅支持单一表达式,既 可直接用return 返回的 以上访问的皆为有限全局对象列表，如需使用没有的属性可：app.config.globalProperties 显式添加 v-model 实现数据双向绑定\n只能用于表单元素？\n修饰符:\nlazy change 时而非 input 时改变 number 自动转为数值 trim 去除空格 vue其他属性 filters\n过滤器, 应用于数据过滤 和绑定属性\n{{ messages | delI }} new Vue({ // methods same level, filters: { delI(val) { // val 既要过滤的数据 // 必须有返回值 return val } } }) methods\n方法\n计算属性 computed\n基于响应式依赖被缓存 只有改依赖对象改变才会执行，example：for i in model；model改变，才会触发其中使用的computed 不要有异步请求 或者更改DOM compute返回值应为只读；其返回为派生状态，既一个临时快照 export default { computed: { addNum(a,b){ return a+b } } } 侦听器 const vue = new Vue(){ data(){ return { username:'233'} } watch: { username: { handler: async function(newVla,oldVal) { console.log(newVla,oldVal) }, // 页面初始渲染好之后，立即触发该侦听器 immediate: true， // 监听深层结构 deep: true } } } 生命周期 var作用域 es5中只有function有作用域 es6中if和for也有作用域了 使用let 不用闭包实现作用域 数组 let arr = ['a','b','c'] // forEach 使用后必定遍历一遍 arr.forEach(element =\u003e {}); // some return 可终止循环 arr.some( v=\u003e { if(v === 'c') return true }) // every let boolval = arr.every( v =\u003e typeof v ===string) // reduse let result = arr.reduce((amt, item) =\u003e {return amt+=item},0) 一.二 响应式基础 export default { data() { return { number: 2, } } // 生命周期钩子 mounted() { console.log(this.number) this.number++ }, methods: { addNum(){ this.number++ } } } 不在data中的属性虽可添加使用，但是不会触发响应式更新\nVue 内置API $开头，内部属性 _;避免顶层data中使用\nmethods 永久指向当前Vue实例，可通过this访问；避免使用箭头表达式，箭头函数this无法指向上下文\nVue 默认深层响应，既无论多深的对象或者数组皆可访问，并对改变监测\nmethods中创建的方法有状态，多个不同组件调用或有影响，应在created生命周期钩子中创建;例如：防抖函数(debounce)\nDOM 更新时机 更新响应式状态后，DOM更新；DOM更新会在周期执行结束后一次性更新组件\n可通过nextTick全局API，等待状态更新完成后的DOM\nimport {nextTick} from 'vue' export default{ methods: { increment(){ nextTick(()=\u003e{}) } } } 二 vue组件 vue原型挂载 // main.js 不利于API接口复用 import axios from 'axios' axios.defaults.baseURL = 'http://localhost' Vue.prototype.$http = axios // .vue const { data: res } = await this.$http.get('/api/get',{data:{}}) EventBus 兄弟\n操作DOM ref\n\u003ch1 ref=\"tmph1\"\u003e\u003c/h1\u003e \u003cscript\u003e Vue(){ methods: { logh1(){ console.log($ref.tmph1) } } } \u003c/script\u003e 注册组件基本步骤 old: use way\nVue.extend() #创建组件构造器 Vue.component() #注册组件 Vue实例范围内使用组件 vue实例components属性(即省略extent注册步骤,在实例中插入模板) // 全局组册组件,2x版本看的教程 \u003cscript src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"\u003e\u003c/script\u003e \u003cscript\u003e const template01 = Vue.extend({ data(){ return { msg: \"定义构建组件\", } }, template:` {{msg}} ` }) Vue.component('teplateName',template01) // 组册 const vue = new Vue({ el: \"#App\", }) \u003c/script\u003e // js obj定义template export default { data(){ return { hello: \"hello world\" } }, template:`这是一个局部组件,{{hello}}` } new: .vue file SFC（单文件组件）\n// component01.vue \u003ctemplate\u003e{{hello}}\u003c/template\u003e \u003cscript\u003e export default { data(){ return { hello: \"hello world\" } } } \u003c/script\u003e // 使用上方的组件 \u003ctemplate\u003e \u003csp01\u003e\u003c/sp01\u003e \u003c/template\u003e \u003cscript\u003e import cp01 from './component01.vue' export default { components: { cp01, } } \u003c/script\u003e style 样式 css样式默认全局生效\nscoped 使组件内样式与全局隔离\n原理为 添加自定义属性，通过css属性选择器隔离在该组件所有标签内；写在style标签中\n/deep/ 选择器前添加使该组件所调用子孙皆添加该样式；多用于修改第三方组件库样式\n\u003ctemplate\u003e\u003c/template\u003e \u003cscript\u003e\u003c/script\u003e \u003cstyle scoped lang=\"less\"\u003e\u003c/style\u003e component标签，keepalive动态组件 component\n模版中 component 标签为默认可替换标签 通过 is 属性绑定要替换的组件,绑定 data 中的值 组件切换，销毁后创新新实例，状态重置\n// component 动态切换基础 \u003ctemplate\u003e \u003ccomponent :is=\"mountComponent\"\u003e\u003c/component\u003e \u003c/template\u003e \u003cscript\u003e import c1 from './component01.vue' import c2 from './component02.vue' export default { data(){ return { mountComponent: 'c1' } } components: { c1,c2 } } \u003c/script\u003e keepalive\n使包含在内的component组件保持状态\ninclude 和 exclude 规定行为；值为字符串或者正则，或者两个类型的数组\nmax 限制保持实例数量；即将超出时，销毁最久未访问实例，为新实例腾出空间\n// 保持组件状态 \u003ctemplate\u003e \u003ckeepalive :include=\"c1\" :exclude=\"c2\" :max=\"10\"\u003e\u003ccomponent/\u003e\u003c/keepalive\u003e \u003c/template\u003e keepalive生命周期\n缓存树中后代组件可用\n\u003cscript\u003e export default { activeted(){ // 首次挂载 // 每次从缓存中重新插入 } deactivated(){ // DOM上移除，进入缓存 // 组件卸载 } } \u003c/script\u003e 模板分离 \u003cscript type=text/x-template if=''\u003e \u003c/script\u003e \u003ctemplate id=''\u003e\u003c/template\u003e 通讯 模板参数传递使用data函数返回(隔离组件返回对象数据) props(父传子) 声明变量,在模板中使用,通过绑定该属性传递父组件的值 $emit(子传父) 自定义事件 $event为推出的值 $children || $refs 获取子组件对象,常用$refs,通过标签设置ref属性访问 $parent || $root props 父组件向子组件传值 子组件通过props定义传递的值 父组件通过对自定义模版标签 绑定自定义属性（既子组件中定义的属性）并传值，向子组件传值 只读属性，父传子后，子不能修改改值；但可绑定到data中重新赋值\n// father vue \u003ctemplate\u003e \u003cchild :msg=\"hello\"\u003e\u003c/child\u003e \u003c/template\u003e \u003cscript\u003e import child from './child.vue' export default { data(){ return { mymsg: this.msg } }, component: {child}, } \u003c/script\u003e // child vue \u003ctemplate\u003e \u003ch1\u003e{{msg1 + msg2}}\u003c/h1\u003e \u003c/template\u003e \u003cscript\u003e export default { data(){ }, // Define way01 // props: [\"msg\"], // Define way02 // prots: { // msg1: String, // msg2: Number // } // Define way03 props: { msg1: Sting, msg2:{ type: Number, default: \"hello\", required: true } } } \u003c/script\u003e $emit() 子传父 / father vue \u003ctemplate\u003e {{mymsg}} \u003cchild @getMsg=\"getmsg\"\u003e\u003c/child\u003e \u003c/template\u003e \u003cscript\u003e import child from './child.vue' export default { data(){ return { mymsg: 0 } }, component: {child}, methods: { getmsg(val){ this.mymsg = val } }, } \u003c/script\u003e // child vue \u003ctemplate\u003e \u003ch1 @click=\"pushMsg\"\u003e\u003c/h1\u003e \u003c/template\u003e \u003cscript\u003e export default { data(){ return{ msg: \"hello\" } }, methods: { pushMsg(){ this.$emit('getMsg',msg) } } } \u003c/script\u003e slot(插槽) 组件可重用之外的使用插槽\n组件中使用声明插槽 组件中slot标签之间为默认值,正文中为不同模板 具名插槽 模板slot标签中的name属性用以声明 注册标签中绑定slot属性实现该插槽 使用时的slot属性要在模板标签只能其他标签中 作用域插槽 模板中不同标签放在slot中 绑定数据对象(要传递给父对象使用的数据) 实例中使用slot-scope属性绑定插槽对象(名字可随意取),包含外围标签中 然后通过.获取绑定名以获取数据 绑定数据对象可随意取名,但后期使用时要一样才能获取 注意事项\nslot内的样式由父组件提供 slot无法访问子组件数据，因为其作用域实际在父组件中 子组件可在slot中定义默认内容，在父组件未为其传值时显示，父组件传值既会覆盖该内容 插槽基本定义与使用 // 父组件调用子组件，并传值，更新slot插槽位置 \u003ctemplate\u003e \u003cmyComponent\u003e child slot content \u003c/myComponent\u003e \u003c/template\u003e // myComponent ,子组件 slot 标签占位 \u003ctemplate\u003e \u003cslot\u003edefault content\u003c/slot\u003e \u003c/template\u003e 三.二 vue-cli 安装及初始化 安装\nnpm install -g @vue/cli # 拉取CLI 2x模板 npm install -g @vue/cli-init 初始化项目\n# 3x vue create 项目名 # 2X vue init webpack 项目名 # 图形化配置管理 vue ui Runtime-Complite 和 Runtime-only 区别 三 axios Promise 异步编程解决方案 链式编程\n三种状态\npending:等待 fulfill:满足 reject:拒绝 四 vue-route(前端渲染) hash or history 模式 //请求页面不刷新页面 hash localtion.hase = 'url' // window.history 栈结构 history.pushState({},'','url') history.back() history.replaceState({},'','') history.go(num) :栈上移动 start 安装\nnpm install vue-route --save 步骤:\nVue.user(插件) import export vue VueReouter实例 router mode linkactiveclass vue绑定route实例 配置路由映射 router-link to 绑定vue模板 type 标签类型 tag 标签 replate 浏览器无返回,返回上一页无用 active-class(模板) router-active-class(路由index.js) 自定义点击事件实现简单路由 this.$router.push(’/Home’) || replate router-view 展示routerlink模板页面 路由 动态路由 路由含有一些后台数据,不是固定链接\nrouter: { path: '/path/:info', // 重定向 redirect: '/path2'， alias: '/c' } // alias 用户访问 /path2 返回 /c vue this.$route.params.info 使用计算属性返回info\n路由参数传递\nparams : this.$route.params.attr query ? $route.$query.attr hash $route.hash 路由传参数 props\n嵌套路由 路由children配置子路由\nroutes: { path: '', component: index, childrem: [ { path: 'child-route', component: child-page } ] } 3.1 命名视图\n\u003crouter-view name='p1'/\u003e \u003crouter-view name='p2'/\u003e router: { path: '', components: { default: componentName1, p1: componentName2, } } 命名路由,感觉较为妥当，但是要多写 既在声明路由时添加name属性\n{ name: 'index', path: '', component: } \u003crouter-link :to={ name: 'index', params: { id: 111}}\u003elink-user\u003c/router-link\u003e 编程式导航,类似 window.history 几个方法\n// 声明式导航 \u003crouer-link to=\"\" /\u003e // 编程式导航 router.push() // 替换当前history \u003crouer-link to=\"\" replace/\u003e router.replace() router.go 如果当前路由与下一路由相同，只是参数变化，需要导航守卫来响应变化\n$router与$route区别\n$router 定义的路由对象 $route 路由对象上处于活跃状态的路由对象 路由懒加载 使用时再请求\n路由里面component用匿名函数返回模板对象，webpack打包自动处理；若使用babel 需要插件 syntax-dynamic-import\nconst Page = () =\u003e import('../components/Page') // 正常使用 const routes = [ { path: '/page', component: Page } ] 导航守卫,路由生命周期函数 路由跳转中的钩子函数(声明周期里面)\n全局导航守卫 //前置守卫(guard) router.beforeEach((to,form,next) =\u003e { next()//继续进行下一步 }) //后置钩子(hook) router.afterEach((to,form) =\u003e { next() }) 路由独享守卫 五 vuex 集中状态管理库\n","wordCount":"1080","inLanguage":"en","image":"blog.2332334.xyz/images/papermod-cover.png","datePublished":"2021-11-08T19:58:55+08:00","dateModified":"2024-12-04T09:05:21+08:00","author":{"@type":"Person","name":"2332334"},"mainEntityOfPage":{"@type":"WebPage","@id":"blog.2332334.xyz/posts/web/vue/"},"publisher":{"@type":"Organization","name":"2332334","logo":{"@type":"ImageObject","url":"blog.2332334.xyz/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=blog.2332334.xyz/ accesskey=h title="2332334 (Alt + H)">2332334</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=blog.2332334.xyz/archives title=活动><span>活动</span></a></li><li><a href=blog.2332334.xyz/search/ title=搜索><span>搜索</span></a></li><li><a href=blog.2332334.xyz/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=blog.2332334.xyz/>Home</a>&nbsp;»&nbsp;<a href=blog.2332334.xyz/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">VUE</h1><div class=post-meta><span title='2021-11-08 19:58:55 +0800 CST'>2021-11-08</span>&nbsp;·&nbsp;1080 words&nbsp;·&nbsp;2332334</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#一-vue基础语法-模版语法>一 vue基础语法 模版语法</a><ul><li><a href=#1-文本插值-mustache-语法插值表达式>1. 文本插值 mustache 语法，插值表达式；</a></li><li><a href=#2-attribute-bind>2. Attribute bind</a></li><li><a href=#3-event-bind>3. event bind</a></li><li><a href=#bind注意信息>bind注意信息</a></li><li><a href=#v-model>v-model</a></li><li><a href=#vue其他属性>vue其他属性</a></li><li><a href=#计算属性>计算属性</a></li><li><a href=#侦听器>侦听器</a></li><li><a href=#生命周期>生命周期</a></li><li><a href=#var作用域>var作用域</a></li><li><a href=#数组>数组</a></li></ul></li><li><a href=#一二-响应式基础>一.二 响应式基础</a><ul><li><a href=#dom-更新时机>DOM 更新时机</a></li></ul></li><li><a href=#二-vue组件>二 vue组件</a><ul><li><a href=#vue原型挂载>vue原型挂载</a></li><li><a href=#注册组件基本步骤>注册组件基本步骤</a></li><li><a href=#component标签keepalive动态组件>component标签，keepalive动态组件</a></li><li><a href=#模板分离>模板分离</a></li><li><a href=#通讯>通讯</a></li><li><a href=#slot插槽>slot(插槽)</a></li></ul></li><li><a href=#三二-vue-cli>三.二 vue-cli</a><ul><li><a href=#安装及初始化>安装及初始化</a></li></ul></li><li><a href=#三-axios>三 axios</a><ul><li><a href=#promise>Promise</a></li></ul></li><li><a href=#四-vue-route前端渲染>四 vue-route(前端渲染)</a><ul><li><a href=#hash-or-history-模式>hash or history 模式</a></li><li><a href=#start>start</a></li></ul></li><li><a href=#路由>路由</a><ul><li><a href=#路由懒加载>路由懒加载</a></li><li><a href=#导航守卫路由生命周期函数>导航守卫,路由生命周期函数</a></li><li><a href=#全局导航守卫>全局导航守卫</a></li></ul></li><li><a href=#五-vuex>五 vuex</a></li></ul></nav></div></details></div><div class=post-content><h1 id=vue>Vue<a hidden class=anchor aria-hidden=true href=#vue>#</a></h1><blockquote><p>start <code>2021年3月19日</code><br>update <code>2022-8-19</code><br>end</p></blockquote><p>前端渐进式框架</p><p>前端三大框架</p><ul><li>Vue</li><li>Angular</li><li>React</li></ul><h2 id=一-vue基础语法-模版语法>一 vue基础语法 模版语法<a hidden class=anchor aria-hidden=true href=#一-vue基础语法-模版语法>#</a></h2><h3 id=1-文本插值-mustache-语法插值表达式>1. 文本插值 mustache 语法，插值表达式；<a hidden class=anchor aria-hidden=true href=#1-文本插值-mustache-语法插值表达式>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>{{msg}}<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-html innerHTML --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 注意XSS漏洞，用户html不可信 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>v-html</span><span class=o>=</span><span class=s>&#34;&lt;span&gt;innerHTML&lt;/span&gt;&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-text --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 覆盖默认内容 --&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-for --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-for 比 v-if 有更高优先级,避免在同个元素上 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>td</span> <span class=na>v-for</span><span class=o>=</span><span class=s>&#34;(value,key,index) in items&#34;</span> <span class=err>{{</span><span class=na>value</span><span class=err>}}</span> <span class=na>:key</span><span class=o>=</span> <span class=s>&#39;val.id&#39;</span><span class=p>&gt;</span>this is table tag<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-if  or v-show --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 前者直接移除该标签，后者则是添加行内属性 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>v-if</span><span class=o>=</span><span class=s>&#34;isDisable&#34;</span><span class=p>&gt;</span>in shot<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=2-attribute-bind>2. Attribute bind<a hidden class=anchor aria-hidden=true href=#2-attribute-bind>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>v-bind:id</span><span class=o>=</span><span class=s>&#39;box1&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 简写 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>:id</span><span class=o>=</span><span class=s>&#39;box1&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>绑定多个对象</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>objOfAttrs</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;box02&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=kr>class</span><span class=o>:</span> <span class=s1>&#39;container&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>:objOfAttrs</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=3-event-bind>3. event bind<a hidden class=anchor aria-hidden=true href=#3-event-bind>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>v</span><span class=o>-</span><span class=nx>on</span><span class=o>:</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;btnClick()&#34;</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;btnClick&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>$event</span>
</span></span><span class=line><span class=cl><span class=c1>// 事件对象，可做参数传递 || 无参数默认传递，有参数需带该固定参数对象
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>keyup</span><span class=p>.</span><span class=nx>esc</span><span class=o>=</span><span class=s1>&#39;clickEst&#39;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// 按键修饰符
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>click</span><span class=p>.</span><span class=nx>prevent</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>event</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// 阻止默认行为
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>click</span><span class=p>.</span><span class=nx>stop</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>event</span><span class=p>.</span><span class=nx>stopPropagation</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// 阻止冒泡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>click</span><span class=p>.</span><span class=nx>capture</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// 捕获模式触发当前事件
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>click</span><span class=p>.</span><span class=nx>once</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// 绑定事件触发一次
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=err>@</span><span class=nx>click</span><span class=p>.</span><span class=nx>self</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=o>&gt;&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// 只有 event.target 是当前元素自身时触发事件处理函数
</span></span></span></code></pre></div><p>事件修饰符(event modifiers)</p><ul><li>prevent</li><li>stop</li><li>once</li><li>key|key num</li></ul><h3 id=bind注意信息>bind注意信息<a hidden class=anchor aria-hidden=true href=#bind注意信息>#</a></h3><p>动态参数</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- v-bind --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>:</span><span class=err>[</span><span class=na>attributeName</span><span class=err>]=&#34;</span><span class=na>url</span><span class=err>&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- v-on --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=err>@[</span><span class=na>eventName</span><span class=err>]=&#39;</span><span class=na>doSomeThing</span><span class=err>&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>动态参数注意</p><ol><li>值 只能为字符串 or null， null则移除该属性</li><li>参数名 不可含有 空格 或者 引号,大写会自动转换为小写</li></ol><blockquote><p>以上：插值表达式 or <code>v-</code>开头的attribute中皆可使用js表达式，既：如下</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{{</span> <span class=nx>number</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>-</span><span class=mi>1</span> <span class=o>*</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>1</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>isOK</span> <span class=o>?</span> <span class=s1>&#39;yes&#39;</span> <span class=o>:</span> <span class=s1>&#39;no&#39;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>str</span><span class=p>.</span><span class=nx>trim</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>).</span><span class=nx>reverse</span><span class=p>().</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;+&#39;</span><span class=p>)</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>div</span> <span class=o>:</span><span class=nx>id</span><span class=o>=</span><span class=s2>&#34;list-`${list.id}`&#34;</span><span class=o>&gt;&lt;</span><span class=err>/div&gt;</span>
</span></span></code></pre></div><blockquote><ol><li>以上 bind 仅支持<code>单一表达式</code>,既 可直接用<code>return 返回的</code></li><li>以上访问的皆为有限全局对象列表，如需使用没有的属性可：<code>app.config.globalProperties</code> 显式添加</li></ol></blockquote><h3 id=v-model>v-model<a hidden class=anchor aria-hidden=true href=#v-model>#</a></h3><p>实现数据双向绑定<br>只能用于表单元素？</p><p>修饰符:</p><ul><li>lazy change 时而非 input 时改变</li><li>number 自动转为数值</li><li>trim 去除空格</li></ul><h3 id=vue其他属性>vue其他属性<a hidden class=anchor aria-hidden=true href=#vue其他属性>#</a></h3><p>filters</p><blockquote><p>过滤器, 应用于数据过滤 和绑定属性</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{{</span> <span class=nx>messages</span> <span class=o>|</span> <span class=nx>delI</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// methods same level,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>filters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>delI</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// val 既要过滤的数据
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// 必须有返回值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=nx>val</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>methods</p><blockquote><p>方法</p></blockquote><h3 id=计算属性>计算属性<a hidden class=anchor aria-hidden=true href=#计算属性>#</a></h3><p>computed</p><ol><li>基于响应式依赖被缓存</li><li>只有改依赖对象改变才会执行，example：for i in model；model改变，才会触发其中使用的computed</li><li>不要有异步请求 或者更改DOM</li><li>compute返回值应为只读；其返回为派生状态，既一个<code>临时快照</code></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computed</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>addNum</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=nx>b</span><span class=p>){</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>a</span><span class=o>+</span><span class=nx>b</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=侦听器>侦听器<a hidden class=anchor aria-hidden=true href=#侦听器>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>vue</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span> <span class=nx>username</span><span class=o>:</span><span class=s1>&#39;233&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>watch</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>username</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>handler</span><span class=o>:</span> <span class=kr>async</span> <span class=kd>function</span><span class=p>(</span><span class=nx>newVla</span><span class=p>,</span><span class=nx>oldVal</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>newVla</span><span class=p>,</span><span class=nx>oldVal</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 页面初始渲染好之后，立即触发该侦听器
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>immediate</span><span class=o>:</span> <span class=kc>true</span><span class=err>，</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 监听深层结构
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>deep</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=生命周期>生命周期<a hidden class=anchor aria-hidden=true href=#生命周期>#</a></h3><p><img alt=周期图式3x loading=lazy src=./images/lifecycle.png>
<img alt=lifecycle2x loading=lazy src=./images/lifecycle%202x.png></p><h3 id=var作用域>var作用域<a hidden class=anchor aria-hidden=true href=#var作用域>#</a></h3><ul><li>es5中只有<code>function</code>有作用域</li><li>es6中<code>if</code>和<code>for</code>也有作用域了<ul><li>使用<code>let</code></li><li>不用闭包实现作用域</li></ul></li></ul><h3 id=数组>数组<a hidden class=anchor aria-hidden=true href=#数组>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>let</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span><span class=s1>&#39;b&#39;</span><span class=p>,</span><span class=s1>&#39;c&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// forEach 使用后必定遍历一遍
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>element</span> <span class=p>=&gt;</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// some return 可终止循环
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span> <span class=nx>v</span><span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span><span class=p>(</span><span class=nx>v</span> <span class=o>===</span> <span class=s1>&#39;c&#39;</span><span class=p>)</span> <span class=k>return</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// every
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>boolval</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>every</span><span class=p>(</span> <span class=nx>v</span> <span class=p>=&gt;</span> <span class=k>typeof</span> <span class=nx>v</span> <span class=o>===</span><span class=nx>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// reduse
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>amt</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span><span class=k>return</span> <span class=nx>amt</span><span class=o>+=</span><span class=nx>item</span><span class=p>},</span><span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></div><hr><h2 id=一二-响应式基础>一.二 响应式基础<a hidden class=anchor aria-hidden=true href=#一二-响应式基础>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>number</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 生命周期钩子
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>mounted</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>number</span><span class=o>++</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>addNum</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>number</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol><li><p>不在data中的属性虽可添加使用，但是不会触发响应式更新</p></li><li><p>Vue 内置API <code>$</code>开头，内部属性 <code>_</code>;避免顶层data中使用</p></li><li><p>methods 永久指向当前Vue实例，可通过this访问；避免使用箭头表达式，箭头函数this无法指向上下文</p></li><li><p>Vue 默认深层响应，既无论多深的对象或者数组皆可访问，并对改变监测</p></li><li><p>methods中创建的方法有状态，多个不同组件调用或有影响，应在<code>created</code>生命周期钩子中创建;例如：防抖函数(debounce)</p></li></ol><h3 id=dom-更新时机>DOM 更新时机<a hidden class=anchor aria-hidden=true href=#dom-更新时机>#</a></h3><p>更新响应式状态后，DOM更新；DOM更新会在周期执行结束后一次性更新组件</p><p>可通过<code>nextTick</code>全局API，等待状态更新完成后的DOM</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span><span class=nx>nextTick</span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=nx>nextTick</span><span class=p>(()=&gt;{})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=二-vue组件>二 vue组件<a hidden class=anchor aria-hidden=true href=#二-vue组件>#</a></h2><h3 id=vue原型挂载>vue原型挂载<a hidden class=anchor aria-hidden=true href=#vue原型挂载>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// main.js 不利于API接口复用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s1>&#39;axios&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>axios</span><span class=p>.</span><span class=nx>defaults</span><span class=p>.</span><span class=nx>baseURL</span> <span class=o>=</span> <span class=s1>&#39;http://localhost&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>Vue</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>$http</span> <span class=o>=</span> <span class=nx>axios</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// .vue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>res</span> <span class=p>}</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>$http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/get&#39;</span><span class=p>,{</span><span class=nx>data</span><span class=o>:</span><span class=p>{}})</span>
</span></span></code></pre></div><p>EventBus 兄弟</p><p>操作DOM
ref</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h1</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;tmph1&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>Vue</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>logh1</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>$ref</span><span class=p>.</span><span class=nx>tmph1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=注册组件基本步骤>注册组件基本步骤<a hidden class=anchor aria-hidden=true href=#注册组件基本步骤>#</a></h3><p>old: use way</p><ol><li>Vue.extend() #创建组件构造器</li><li>Vue.component() #注册组件</li><li>Vue实例范围内使用组件</li><li>vue实例components属性(即省略extent注册步骤,在实例中插入模板)</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 全局组册组件,2x版本看的教程
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>src</span><span class=o>=</span><span class=s2>&#34;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#34;</span><span class=o>&gt;&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>template01</span> <span class=o>=</span> <span class=nx>Vue</span><span class=p>.</span><span class=nx>extend</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>msg</span><span class=o>:</span> <span class=s2>&#34;定义构建组件&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>template</span><span class=o>:</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  &lt;h1&gt;{{msg}}&lt;/h1&gt;
</span></span></span><span class=line><span class=cl><span class=sb>  `</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nx>Vue</span><span class=p>.</span><span class=nx>component</span><span class=p>(</span><span class=s1>&#39;teplateName&#39;</span><span class=p>,</span><span class=nx>template01</span><span class=p>)</span> <span class=c1>// 组册
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>vue</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>el</span><span class=o>:</span> <span class=s2>&#34;#App&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// js obj定义template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>hello</span><span class=o>:</span> <span class=s2>&#34;hello world&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>template</span><span class=o>:</span><span class=sb>`&lt;h1&gt;这是一个局部组件,{{hello}}&lt;/h1&gt;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>new: .vue file SFC（单文件组件）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// component01.vue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;{{</span><span class=nx>hello</span><span class=p>}}&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>hello</span><span class=o>:</span> <span class=s2>&#34;hello world&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 使用上方的组件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>sp01</span><span class=p>&gt;&lt;/</span><span class=nt>sp01</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>cp01</span> <span class=nx>from</span> <span class=s1>&#39;./component01.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>components</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cp01</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h4 id=style-样式>style 样式<a hidden class=anchor aria-hidden=true href=#style-样式>#</a></h4><blockquote><p>css样式默认全局生效</p></blockquote><p>scoped 使组件内样式与全局隔离</p><blockquote><p>原理为 添加自定义属性，通过css属性选择器隔离在该组件所有标签内；写在style标签中</p></blockquote><p>/deep/ 选择器前添加使该组件所调用子孙皆添加该样式；多用于修改第三方组件库样式</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span> <span class=na>scoped</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;less&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=component标签keepalive动态组件>component标签，keepalive动态组件<a hidden class=anchor aria-hidden=true href=#component标签keepalive动态组件>#</a></h3><p>component</p><ol><li>模版中 <code>component</code> 标签为默认可替换标签</li><li>通过 <code>is</code> 属性绑定要替换的组件,绑定 data 中的值</li></ol><blockquote><p>组件切换，销毁后创新新实例，状态重置</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// component 动态切换基础
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>component</span> <span class=nt>:is</span><span class=o>=</span><span class=s>&#34;mountComponent&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>component</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>c1</span> <span class=nx>from</span> <span class=s1>&#39;./component01.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>c2</span> <span class=nx>from</span> <span class=s1>&#39;./component02.vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>mountComponent</span><span class=o>:</span> <span class=s1>&#39;c1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>components</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>c1</span><span class=p>,</span><span class=nx>c2</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>keepalive</p><ol><li><p>使包含在内的component组件保持状态</p></li><li><p>include 和 exclude 规定行为；值为字符串或者正则，或者两个类型的数组</p></li><li><p>max 限制保持实例数量；即将超出时，销毁最久未访问实例，为新实例腾出空间</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// 保持组件状态
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>keepalive</span> <span class=nt>:include</span><span class=o>=</span><span class=s>&#34;c1&#34;</span> <span class=nt>:exclude</span><span class=o>=</span><span class=s>&#34;c2&#34;</span> <span class=nt>:max</span><span class=o>=</span><span class=s>&#34;10&#34;</span><span class=p>&gt;&lt;</span><span class=nt>component</span><span class=p>/&gt;&lt;/</span><span class=nt>keepalive</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>keepalive生命周期</p><blockquote><p>缓存树中后代组件可用</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>activeted</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 首次挂载
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 每次从缓存中重新插入
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>deactivated</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=c1>// DOM上移除，进入缓存
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 组件卸载
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=模板分离>模板分离<a hidden class=anchor aria-hidden=true href=#模板分离>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>text/x-template</span> <span class=na>if</span><span class=o>=</span><span class=s>&#39;&#39;</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=通讯>通讯<a hidden class=anchor aria-hidden=true href=#通讯>#</a></h3><ul><li>模板参数传递使用data函数返回(隔离组件返回对象数据)</li><li>props(父传子)<ul><li>声明变量,在模板中使用,通过绑定该属性传递父组件的值</li></ul></li><li>$emit(子传父)<ul><li>自定义事件</li><li>$event为推出的值</li></ul></li><li>$children || $refs<ul><li>获取子组件对象,常用$refs,通过标签设置ref属性访问</li></ul></li><li>$parent || $root</li></ul><h4 id=props-父组件向子组件传值>props 父组件向子组件传值<a hidden class=anchor aria-hidden=true href=#props-父组件向子组件传值>#</a></h4><ol><li>子组件通过props定义传递的值</li><li>父组件通过对自定义模版标签 绑定自定义属性（既子组件中定义的属性）并传值，向子组件传值</li></ol><blockquote><p>只读属性，父传子后，子不能修改改值；但可绑定到data中重新赋值</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// father vue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>child</span> <span class=o>:</span><span class=nx>msg</span><span class=o>=</span><span class=s2>&#34;hello&#34;</span><span class=o>&gt;&lt;</span><span class=err>/child&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>child</span> <span class=nx>from</span> <span class=s1>&#39;./child.vue&#39;</span>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>mymsg</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>msg</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=p>{</span><span class=nx>child</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// child vue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=p>{{</span><span class=nx>msg1</span> <span class=o>+</span> <span class=nx>msg2</span><span class=p>}}</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Define way01
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// props: [&#34;msg&#34;],
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// Define way02
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// prots: {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//   msg1: String,
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//   msg2: Number
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// Define way03
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>msg1</span><span class=o>:</span> <span class=nx>Sting</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>msg2</span><span class=o>:</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=o>:</span> <span class=s2>&#34;hello&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><h4 id=emit-子传父>$emit() 子传父<a hidden class=anchor aria-hidden=true href=#emit-子传父>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=err>/ father vue</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>mymsg</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>child</span> <span class=nt>@getMsg</span><span class=s>=&#34;getmsg&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>child</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>child</span> <span class=nx>from</span> <span class=s1>&#39;./child.vue&#39;</span>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>mymsg</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=p>{</span><span class=nx>child</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>getmsg</span><span class=p>(</span><span class=nx>val</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>mymsg</span> <span class=o>=</span> <span class=nx>val</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// child vue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h1</span> <span class=nt>@click</span><span class=s>=&#34;pushMsg&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>msg</span><span class=o>:</span> <span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>pushMsg</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>$emit</span><span class=p>(</span><span class=s1>&#39;getMsg&#39;</span><span class=p>,</span><span class=nx>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=slot插槽>slot(插槽)<a hidden class=anchor aria-hidden=true href=#slot插槽>#</a></h3><blockquote><p>组件可重用之外的使用插槽</p></blockquote><ul><li>组件中使用<code>&lt;slot>&lt;/slot></code>声明插槽</li><li>组件中slot标签之间为默认值,正文中为不同模板</li><li>具名插槽<ul><li>模板<code>slot标签</code>中的<code>name</code>属性用以声明</li><li>注册标签中绑定<code>slot</code>属性实现该插槽</li><li>使用时的<code>slot</code>属性要在模板标签只能其他标签中</li></ul></li><li>作用域插槽<ul><li>模板中不同标签放在<code>slot</code>中</li><li>绑定数据对象(要传递给父对象使用的数据)</li><li>实例中使用<code>slot-scope</code>属性绑定插槽对象(名字可随意取),包含外围标签中</li><li>然后通过<code>.</code>获取绑定名以获取数据</li><li>绑定数据对象可随意取名,但后期使用时要一样才能获取</li></ul></li></ul><p>注意事项</p><ol><li>slot内的样式由父组件提供</li><li>slot无法访问子组件数据，因为其作用域实际在父组件中</li><li>子组件可在slot中定义默认内容，在父组件未为其传值时显示，父组件传值既会覆盖该内容</li></ol><h4 id=插槽基本定义与使用>插槽基本定义与使用<a hidden class=anchor aria-hidden=true href=#插槽基本定义与使用>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// 父组件调用子组件，并传值，更新slot插槽位置
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>myComponent</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>child</span> <span class=nx>slot</span> <span class=nx>content</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>myComponent</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// myComponent ,子组件 slot 标签占位
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>slot</span><span class=p>&gt;</span><span class=k>default</span> <span class=nx>content</span><span class=p>&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></div><hr><h2 id=三二-vue-cli>三.二 vue-cli<a hidden class=anchor aria-hidden=true href=#三二-vue-cli>#</a></h2><h3 id=安装及初始化>安装及初始化<a hidden class=anchor aria-hidden=true href=#安装及初始化>#</a></h3><p>安装</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -g @vue/cli
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 拉取CLI 2x模板</span>
</span></span><span class=line><span class=cl>npm install -g @vue/cli-init
</span></span></code></pre></div><p>初始化项目</p><pre tabindex=0><code class=language-base data-lang=base># 3x
vue create 项目名

# 2X
vue init webpack 项目名

# 图形化配置管理
vue ui
</code></pre><h4 id=runtime-complite-和-runtime-only-区别>Runtime-Complite 和 Runtime-only 区别<a hidden class=anchor aria-hidden=true href=#runtime-complite-和-runtime-only-区别>#</a></h4><hr><h2 id=三-axios>三 axios<a hidden class=anchor aria-hidden=true href=#三-axios>#</a></h2><h3 id=promise>Promise<a hidden class=anchor aria-hidden=true href=#promise>#</a></h3><blockquote><p>异步编程解决方案
链式编程</p></blockquote><p>三种状态</p><ul><li>pending:等待</li><li>fulfill:满足</li><li>reject:拒绝</li></ul><h2 id=四-vue-route前端渲染>四 vue-route(前端渲染)<a hidden class=anchor aria-hidden=true href=#四-vue-route前端渲染>#</a></h2><h3 id=hash-or-history-模式>hash or history 模式<a hidden class=anchor aria-hidden=true href=#hash-or-history-模式>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//请求页面不刷新页面 hash
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>localtion</span><span class=p>.</span><span class=nx>hase</span> <span class=o>=</span> <span class=s1>&#39;url&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//  window.history 栈结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>history</span><span class=p>.</span><span class=nx>pushState</span><span class=p>({},</span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=s1>&#39;url&#39;</span><span class=p>)</span>    
</span></span><span class=line><span class=cl><span class=nx>history</span><span class=p>.</span><span class=nx>back</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>history</span><span class=p>.</span><span class=nx>replaceState</span><span class=p>({},</span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>history</span><span class=p>.</span><span class=nx>go</span><span class=p>(</span><span class=nx>num</span><span class=p>)</span>   <span class=o>:</span><span class=nx>栈上移动</span>
</span></span></code></pre></div><h3 id=start>start<a hidden class=anchor aria-hidden=true href=#start>#</a></h3><p>安装</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install vue-route --save
</span></span></code></pre></div><p>步骤:</p><ol><li>Vue.user(插件)</li><li>import export</li><li>vue VueReouter实例<ol><li>router</li><li>mode</li><li>linkactiveclass</li></ol></li><li>vue绑定route实例</li><li>配置路由映射</li><li>router-link<ol><li>to 绑定vue模板</li><li>type 标签类型</li><li>tag 标签</li><li>replate 浏览器无返回,返回上一页无用</li><li>active-class(模板)</li><li>router-active-class(路由index.js)</li><li>自定义点击事件实现简单路由<ol><li>this.$router.push(&rsquo;/Home&rsquo;) || replate</li></ol></li></ol></li><li>router-view<ul><li>展示routerlink模板页面</li></ul></li></ol><h2 id=路由>路由<a hidden class=anchor aria-hidden=true href=#路由>#</a></h2><blockquote><ol><li>动态路由</li></ol></blockquote><p>路由含有一些后台数据,不是固定链接</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-JavaScript data-lang=JavaScript><span class=line><span class=cl><span class=nx>router</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/path/:info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 重定向
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>redirect</span><span class=o>:</span> <span class=s1>&#39;/path2&#39;</span><span class=err>，</span>
</span></span><span class=line><span class=cl>  <span class=nx>alias</span><span class=o>:</span> <span class=s1>&#39;/c&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// alias 用户访问 /path2 返回 /c
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>vue</span>
</span></span><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>$route</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>info</span>
</span></span></code></pre></div><p>使用计算属性返回info</p><p>路由参数传递</p><ul><li>params :<ul><li>this.$route.params.attr</li></ul></li><li>query ?<ul><li>$route.$query.attr</li></ul></li><li>hash<ul><li>$route.hash</li></ul></li></ul><blockquote><p>路由传参数 props</p></blockquote><blockquote><ol start=2><li>嵌套路由</li></ol></blockquote><p>路由children配置子路由</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>routes</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>component</span><span class=o>:</span> <span class=nx>index</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>childrem</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;child-route&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>component</span><span class=o>:</span> <span class=nx>child</span><span class=o>-</span><span class=nx>page</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>3.1 命名视图</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>router</span><span class=o>-</span><span class=nx>view</span> <span class=nx>name</span><span class=o>=</span><span class=s1>&#39;p1&#39;</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>router</span><span class=o>-</span><span class=nx>view</span> <span class=nx>name</span><span class=o>=</span><span class=s1>&#39;p2&#39;</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>components</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=o>:</span> <span class=nx>componentName1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>p1</span><span class=o>:</span> <span class=nx>componentName2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><ol start=3><li>命名路由,感觉较为妥当，但是要多写</li></ol></blockquote><p>既在声明路由时添加<code>name</code>属性</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>component</span><span class=o>:</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>router</span><span class=o>-</span><span class=nx>link</span> <span class=o>:</span><span class=nx>to</span><span class=o>=</span><span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span> <span class=nx>params</span><span class=o>:</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>111</span><span class=p>}}</span><span class=o>&gt;</span><span class=nx>link</span><span class=o>-</span><span class=nx>user</span><span class=o>&lt;</span><span class=err>/router-link&gt;</span>
</span></span></code></pre></div><blockquote><p>编程式导航,类似 <code>window.history</code> 几个方法</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 声明式导航
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>rouer</span><span class=o>-</span><span class=nx>link</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 编程式导航
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>push</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 替换当前history
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>rouer</span><span class=o>-</span><span class=nx>link</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;&#34;</span> <span class=nx>replace</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>replace</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>go</span>
</span></span></code></pre></div><p>如果当前路由与下一路由相同，只是参数变化，需要导航守卫来响应变化</p><blockquote><p>$router与$route区别</p></blockquote><ul><li>$router 定义的路由对象</li><li>$route 路由对象上处于活跃状态的路由对象</li></ul><h3 id=路由懒加载>路由懒加载<a hidden class=anchor aria-hidden=true href=#路由懒加载>#</a></h3><blockquote><p>使用时再请求</p></blockquote><p>路由里面component用匿名函数返回模板对象，webpack打包自动处理；若使用babel 需要插件 syntax-dynamic-import</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Page</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;../components/Page&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 正常使用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>routes</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/page&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>Page</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=导航守卫路由生命周期函数>导航守卫,路由生命周期函数<a hidden class=anchor aria-hidden=true href=#导航守卫路由生命周期函数>#</a></h3><blockquote><p>路由跳转中的钩子函数(声明周期里面)</p></blockquote><h3 id=全局导航守卫>全局导航守卫<a hidden class=anchor aria-hidden=true href=#全局导航守卫>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>//前置守卫(guard)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span><span class=nx>form</span><span class=p>,</span><span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>()</span><span class=c1>//继续进行下一步
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//后置钩子(hook)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>afterEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span><span class=nx>form</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><ul><li>路由独享守卫</li></ul><hr><h2 id=五-vuex>五 vuex<a hidden class=anchor aria-hidden=true href=#五-vuex>#</a></h2><p>集中状态管理库</p><hr></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=blog.2332334.xyz/posts/software/vscodeserver/><span class=title>« Prev</span><br><span>VscodeServer</span>
</a><a class=next href=blog.2332334.xyz/posts/web/vue3+vite+env/><span class=title>Next »</span><br><span>Vue3 + vite 配置env环境变量</span></a></nav></footer></article></main><footer class=footer><span>© <a href=https://github.com/adityatelange/hugo-PaperMod/graphs/contributors>2332334</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>